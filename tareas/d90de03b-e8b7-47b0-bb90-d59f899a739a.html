
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>¡No te chispotees! ⚡️</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{overflow:hidden;overscroll-behavior:none;font-family:'Baloo 2',sans-serif;background:#FFF;color:#1A1B2F;height:100%;width:100%}
.scene{height:100svh;height:100dvh;overflow:hidden;display:flex;flex-direction:column;padding:env(safe-area-inset-top,80px) env(safe-area-inset-right,16px) env(safe-area-inset-bottom,16px) env(safe-area-inset-left,16px);touch-action:none}
.scene.results{overflow-y:auto;touch-action:auto}
.hud{display:flex;justify-content:space-between;align-items:center;padding:0 0 20px 0;gap:12px}
.progress{font-size:clamp(16px,4vw,18px);font-weight:700;color:#00E6BC}
.avatar{width:48px;height:48px;border-radius:50%;object-fit:cover;border:2px solid #00E6BC}
.content{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:24px;padding:0 8px}
.question{font-size:clamp(18px,5vw,22px);font-weight:700;text-align:center;color:#1A1B2F;line-height:1.3;max-width:500px}
.options{display:flex;flex-direction:column;gap:16px;width:100%;max-width:500px}
.option{background:#FFF;border:2px solid #00E6BC;border-radius:24px;padding:16px 20px;font-size:clamp(15px,4vw,17px);font-weight:600;color:#1A1B2F;min-height:56px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;text-align:center;line-height:1.3}
.option:hover{background:#C5FFDF;transform:translateY(-2px)}
.option:active{transform:scale(.98)}
.option.correct{background:#04FFB4;border-color:#04FFB4;animation:pulse .4s}
.option.wrong{background:#F9577E;border-color:#F9577E;color:#FFF;animation:shake .4s}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
.tutorial{text-align:center;max-width:500px}
.tutorial h1{font-size:clamp(24px,6vw,32px);font-weight:700;margin-bottom:16px;color:#1A1B2F}
.tutorial p{font-size:clamp(15px,4vw,17px);color:#1A1B2F;line-height:1.5;margin-bottom:24px}
.btn{background:#0B214A;color:#00E6BC;border:none;border-radius:24px;padding:16px 32px;font-size:clamp(16px,4.5vw,18px);font-weight:700;font-family:'Baloo 2',sans-serif;cursor:pointer;box-shadow:0 8px 18px rgba(11,33,74,.25);min-height:56px;transition:all .2s}
.btn:hover{transform:translateY(-2px);box-shadow:0 12px 24px rgba(11,33,74,.35)}
.btn:active{transform:scale(.98)}
.btn:disabled{opacity:.4;cursor:not-allowed}
.results-container{padding:20px 16px;max-width:600px;margin:0 auto}
.results-header{text-align:center;margin-bottom:32px}
.results-header h2{font-size:clamp(24px,6vw,28px);font-weight:700;color:#1A1B2F;margin-bottom:12px}
.score{font-size:clamp(20px,5vw,24px);color:#00E6BC;font-weight:700;background:#C5FFDF;padding:12px 24px;border-radius:16px;display:inline-block}
.review-item{background:#FFF;border:2px solid #00E6BC;border-radius:16px;padding:16px;margin-bottom:16px}
.review-q{font-weight:700;font-size:clamp(15px,4vw,16px);margin-bottom:12px;color:#1A1B2F}
.review-answer{font-size:clamp(14px,3.5vw,15px);margin:8px 0;padding:8px 12px;border-radius:12px}
.review-answer.user{background:#C5FFDF}
.review-answer.correct{background:#C5FFDF;border-left:4px solid #04FFB4}
.review-answer.wrong{background:#FFE5EB;border-left:4px solid #F9577E}
.review-label{font-weight:700;font-size:12px;text-transform:uppercase;color:#00E6BC;margin-bottom:4px}
.explanation{font-size:clamp(13px,3.5vw,14px);color:#1A1B2F;line-height:1.4;margin-top:8px;padding:8px;background:#F8F9FA;border-radius:8px}
.advice{background:#C5FFDF;border-left:4px solid #00E6BC;padding:16px;border-radius:12px;margin:24px 0;font-size:clamp(14px,4vw,15px);line-height:1.5}
.fade-in{animation:fadeIn .4s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div class="scene" id="scene">
<div class="hud" id="hud">
<div class="progress" id="progress">1/5</div>
<img src="https://techkampe.github.io/daily-streak/assets/Avatar%201_low.png" alt="Avatar" class="avatar" loading="lazy">
</div>
<div class="content" id="content">
<div class="tutorial">
<h1>¡No te chispotees! ⚡️</h1>
<p>Demuestra que conoces los básicos de seguridad eléctrica. 5 preguntas sobre PRL.</p>
<button class="btn" onclick="startQuiz()">Comenzar</button>
</div>
</div>
</div>
<script>
const questions=[
{q:"Antes de trabajar en un circuito eléctrico, ¿cuál es la primera regla de oro?",
options:["Abrir con corte visible todas las fuentes de tensión","Usar guantes dieléctricos","Avisar al supervisor"],
correct:0,
exp:"La primera regla de oro es abrir con corte visible para asegurar que no hay corriente."},
{q:"¿Qué EPI es obligatorio al trabajar en proximidad de cables energizados?",
options:["Guantes dieléctricos y casco aislante","Solo gafas de protección","Botas de seguridad normales"],
correct:0,
exp:"Los guantes dieléctricos y casco aislante protegen de contactos eléctricos directos."},
{q:"Tras abrir el circuito, ¿qué debes hacer antes de tocar los conductores?",
options:["Verificar ausencia de tensión con voltímetro","Esperar 5 minutos","Poner las manos a tierra"],
correct:0,
exp:"Verificar ausencia de tensión es la tercera regla de oro; nunca asumir que está sin corriente."},
{q:"¿Qué señal debe colocarse en la zona de trabajo eléctrico?",
options:["Señal de riesgo eléctrico visible","Solo cinta amarilla","No es necesario señalizar"],
correct:0,
exp:"La señalización advierte a otros del peligro y delimita la zona de trabajo."},
{q:"Si ves un cable pelado en el suelo, ¿qué haces primero?",
options:["Avisar y acordonar la zona sin tocar","Cubrirlo con cinta aislante","Apagar el cuadro general"],
correct:0,
exp:"Nunca tocar un cable desconocido. Acordonar y avisar al responsable es lo correcto."}
];
let current=0,answers=[],gameStarted=false;
function startQuiz(){
gameStarted=true;
document.getElementById('content').classList.add('fade-in');
showQuestion();
}
function showQuestion(){
if(current>=questions.length){showResults();return}
const q=questions[current];
document.getElementById('progress').textContent=`${current+1}/${questions.length}`;
document.getElementById('content').innerHTML=`
<div class="question fade-in">${q.q}</div>
<div class="options fade-in">
${q.options.map((opt,i)=>`<button class="option" onclick="selectAnswer(${i})" aria-label="Opción ${i+1}">${opt}</button>`).join('')}
</div>`;
}
function selectAnswer(idx){
const q=questions[current];
answers.push(idx);
const opts=document.querySelectorAll('.option');
opts.forEach(o=>o.style.pointerEvents='none');
if(idx===q.correct){
opts[idx].classList.add('correct');
}else{
opts[idx].classList.add('wrong');
opts[q.correct].classList.add('correct');
}
setTimeout(()=>{
current++;
showQuestion();
},1200);
}
function showResults(){
document.getElementById('scene').classList.add('results');
document.getElementById('hud').style.display='none';
const correctCount=answers.filter((a,i)=>a===questions[i].correct).length;
let html=`<div class="results-container">
<div class="results-header">
<h2>Resultados</h2>
<div class="score">${correctCount}/${questions.length} Correctas</div>
</div>`;
questions.forEach((q,i)=>{
const userAns=answers[i];
const isCorrect=userAns===q.correct;
html+=`<div class="review-item">
<div class="review-q">${i+1}. ${q.q}</div>
<div class="review-label">Tu respuesta</div>
<div class="review-answer ${isCorrect?'correct':'wrong'}">${q.options[userAns]}</div>`;
if(!isCorrect){
html+=`<div class="review-label">Respuesta correcta</div>
<div class="review-answer correct">${q.options[q.correct]}</div>`;
}
html+=`<div class="explanation">${q.exp}</div></div>`;
});
html+=`<div class="advice"><strong>Consejo:</strong> La seguridad eléctrica salva vidas. Siempre verifica, señaliza y usa tus EPIs.</div>
<button class="btn" onclick="completeTask()">Ver mi recompensa</button>
</div>`;
document.getElementById('content').innerHTML=html;
}
function completeTask(){
if(window.ReactNativeWebView){
window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));
}
}
</script>
</body>
</html>

