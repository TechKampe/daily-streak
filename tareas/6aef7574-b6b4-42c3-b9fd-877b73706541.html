<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>¡Corriente Segura, Futuro Brillante! ⚡️</title><link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet"><style>
:root{--bg:#FFFFFF;--text:#1A1B2F;--accent:#00E6BC;--primary:#0B214A;--success:#04FFB4;--error:#F9577E;--shadow:0 8px 18px rgba(11,33,74,.25);--ui-scale:1}
*{box-sizing:border-box}
html,body{height:100%;background:#fff;color:var(--text);font-family:"Baloo 2",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;overflow:hidden;overscroll-behavior:none}
img{max-width:100%;display:block}
button{font-family:inherit}
.app{position:relative;isolation:isolate}
.avatar{position:fixed;inset:auto auto auto 0;opacity:.08;z-index:0;transform:translate(-10%,10%);width:min(42vw,220px);pointer-events:none}
.scene{position:relative;padding:calc(80px + env(safe-area-inset-top,0px)) 20px calc(16px + env(safe-area-inset-bottom,0px));display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:12px;touch-action:none;transform:scale(var(--ui-scale));transform-origin:top center}
@supports(height:100svh){.scene{height:100svh}}
@supports not (height:100svh){@supports(height:100dvh){.scene{height:100dvh}}}
@supports not (height:100dvh){.scene{height:100vh}}
.safePad{position:absolute;top:0;left:0;right:0;height:80px;pointer-events:none}
.ui{position:relative;z-index:1;width:100%;max-width:720px;padding-right:120px;margin-inline:auto}
.hud{display:flex;flex-direction:column;gap:8px}
.badge{display:inline-flex;align-items:center;justify-content:center;min-width:56px;padding:6px 12px;border:1px solid var(--accent);color:var(--accent);background:#C5FFDF;border-radius:12px;font-weight:700;font-size:clamp(12px,2.6vw,14px);width:fit-content}
.progress{height:8px;width:100%;background:#e6fffa;border:1px solid var(--accent);border-radius:999px;overflow:hidden}
.progress .fill{height:100%;width:0;background:linear-gradient(90deg,var(--success),#00ffc8);transition:width .35s ease}
.title{margin:4px 0 0 0;font-weight:800;letter-spacing:.2px;font-size:clamp(18px,3.8vw,22px);color:var(--text)}
.question{margin:6px 0 2px 0;font-weight:700;letter-spacing:.2px;font-size:clamp(18px,5vw,26px);line-height:1.2;max-width:100%;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}
.options{display:flex;flex-direction:column;gap:10px;width:100%}
.option{position:relative;display:flex;align-items:center;justify-content:center;text-align:center;padding:14px 14px;min-height:56px;border-radius:24px;background:var(--primary);color:var(--accent);border:1px solid var(--accent);box-shadow:var(--shadow);font-weight:700;font-size:clamp(14px,3.8vw,16px);cursor:pointer;transition:transform .08s ease,filter .08s ease,background .2s ease;outline:none}
.option .txt{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}
.option:hover{filter:brightness(1.08)}
.option:active{transform:scale(.98)}
.option:focus-visible{outline:3px dashed var(--accent);outline-offset:2px}
.fade-in{animation:fadeIn .25s ease both}
.fade-out{animation:fadeOut .2s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes fadeOut{from{opacity:1}to{opacity:0;transform:translateY(-8px) scale(.98)}}
.modal{position:fixed;inset:0;display:grid;place-items:center;padding:20px;background:rgba(255,255,255,.98);z-index:5}
.modal .card{background:#fff;border:1px solid var(--accent);border-radius:16px;box-shadow:var(--shadow);padding:16px 16px 90px 16px;max-width:720px;width:clamp(280px,92vw,720px);max-height:90svh;overflow-y:auto;position:relative}
.modal h1{font-size:clamp(20px,6vw,28px);margin:4px 0 6px 0;color:var(--text)}
.modal p{font-size:clamp(14px,4vw,16px);margin:6px 0;line-height:1.3}
.startBtn,.finalBtn{position:sticky;bottom:8px;left:0;right:0;margin:12px auto 0 auto;display:block;width:100%;max-width:520px;padding:14px;border-radius:24px;background:var(--primary);color:var(--accent);border:1px solid var(--accent);box-shadow:var(--shadow);font-weight:800;font-size:clamp(15px,4.2vw,17px);cursor:pointer;text-align:center}
.startBtn[disabled]{opacity:.4;box-shadow:none}
.helper{background:#C5FFDF;color:#0B214A;border-radius:12px;padding:8px 10px;border:1px solid var(--accent);font-size:clamp(12px,3.6vw,14px);margin-top:6px}
.hidden{display:none}
.info{font-size:12px;color:#0B214A;opacity:.8}
.summary{position:fixed;inset:0;padding:calc(14px + env(safe-area-inset-top)) 16px calc(14px + env(safe-area-inset-bottom));background:#fff;z-index:6;display:flex;flex-direction:column;gap:8px}
.summary .head{padding-right:120px}
.summary h2{font-size:clamp(18px,5vw,24px);margin:2px 0 6px 0}
.list{flex:1 1 auto;overflow-y:auto;border:1px solid var(--accent);border-radius:16px;padding:10px 10px;background:#fff}
.item{border-bottom:1px dashed #d8fff2;padding:8px 4px}
.item:last-child{border-bottom:none}
.item .q{font-weight:700;margin-bottom:4px;font-size:clamp(14px,3.8vw,16px)}
.bad{color:var(--error);font-weight:700}
.good{color:var(--success);font-weight:700}
.explain{font-size:clamp(12px,3.4vw,14px);color:#0B214A}
.tip{margin-top:8px;background:#C5FFDF;border:1px solid var(--accent);color:#0B214A;border-radius:12px;padding:10px}
.finalBtn{position:sticky}
.compact .title{font-size:clamp(16px,3.4vw,18px)}
.compact .question{font-size:clamp(16px,4.2vw,20px)}
.compact .option{min-height:52px;padding:12px;font-size:clamp(13px,3.4vw,15px)}
.compact .badge{font-size:clamp(11px,2.2vw,13px)}
@media (prefers-reduced-motion:reduce){.fade-in,.fade-out{animation:none}.option{transition:none}}
</style></head><body>
<div class="app" id="app">
<img class="avatar" alt="Avatar personaje Kämpe" src="https://techkampe.github.io/daily-streak/assets/Avatar 2_low.png" loading="lazy">
<div class="safePad" aria-hidden="true"></div>
<section id="game" class="scene">
  <div class="ui">
    <div class="hud">
      <div class="badge" id="progressTxt">1/5</div>
      <div class="progress" aria-hidden="true"><div class="fill" id="progressFill" style="width:0%"></div></div>
      <div class="title">¡Corriente Segura, Futuro Brillante! ⚡️</div>
    </div>
    <div id="qWrap" class="fade-in">
      <div id="qText" class="question" role="heading" aria-live="polite"></div>
      <div class="options" id="options"></div>
    </div>
  </div>
</section>

<div id="intro" class="modal">
  <div class="card">
    <h1>¡Corriente Segura, Futuro Brillante! ⚡️</h1>
    <p>Estás en tu primer día como ayudante de electricista. Antes de tocar un cable, prueba rápida de seguridad sobre EPIs y reglas de oro.</p>
    <div class="helper">Cómo jugar: elige la opción correcta en cada situación. Avanza automáticamente. Son 5 preguntas, respuestas cortas.</div>
    <button class="startBtn" id="startBtn">Empezar</button>
    <div class="info">Dura ~2 min</div>
  </div>
</div>

<section id="summary" class="summary hidden" aria-live="polite">
  <div class="head">
    <h2>Resultados y aprendizaje</h2>
  </div>
  <div id="list" class="list" role="list"></div>
  <div class="tip" id="tip">Consejo: nunca confíes en “está apagado”. Bloquea, etiqueta y verifica ausencia de tensión antes de empezar.</div>
  <button class="finalBtn" onclick="completeTask()">Ver mi recompensa</button>
</section>
</div>

<script>
const quiz=[{q:"Antes de abrir un tablero, ¿qué EPI usas?",opts:["Guantes dieléctricos clase adecuada","Gafas de sol","Guantes de cuero sin aislamiento","Ninguno si el tablero está apagado"],a:0,ex:"Los guantes dieléctricos protegen ante contactos inesperados. Apagado no es garantía de ausencia de tensión."},{q:"Secuencia segura antes de intervenir en un circuito:",opts:["Cortar, bloquear, verificar ausencia de tensión","Medir, cortar, trabajar","Avisar, trabajar, luego cortar"],a:0,ex:"Aplica LOTO: cortar energía, bloquear/etiquetar y verificar ausencia de tensión con equipo adecuado."},{q:"Para medir 230 V domésticos, el multímetro va en:",opts:["Voltaje AC (V~)","Voltaje DC (V—)","Continuidad","Amperios AC"],a:0,ex:"La red residencial es corriente alterna. Usa el rango de voltaje AC para una lectura segura."},{q:"En suelo húmedo, el calzado más seguro es:",opts:["Bota dieléctrica con suela aislante","Zapatillas deportivas","Bota metálica sin puntera"],a:0,ex:"El calzado dieléctrico aísla y evita derivaciones peligrosas en ambientes húmedos."},{q:"Cerca de partes activas, usa escalera de:",opts:["Fibra","Aluminio","Metálica con tierra"],a:0,ex:"La fibra no conduce electricidad y reduce el riesgo de choque cerca de elementos energizados."}];
const state={i:0,answers:[]};
const qText=document.getElementById("qText");
const optionsEl=document.getElementById("options");
const progressTxt=document.getElementById("progressTxt");
const progressFill=document.getElementById("progressFill");
const game=document.getElementById("game");
const intro=document.getElementById("intro");
const summary=document.getElementById("summary");
const list=document.getElementById("list");
const startBtn=document.getElementById("startBtn");
function clampText(str,max=48){return str.length>max?str.slice(0,max-1)+"…":str}
function render(){const item=quiz[state.i];progressTxt.textContent=`${state.i+1}/${quiz.length}`;const pct=((state.i)/quiz.length)*100;progressFill.style.width=`${pct}%`;qText.textContent=clampText(item.q,90);optionsEl.innerHTML="";item.opts.forEach((t,idx)=>{const b=document.createElement("button");b.className="option";b.setAttribute("aria-label",t);b.innerHTML=`<span class="txt">${clampText(t)}</span>`;b.onclick=()=>choose(idx,b);optionsEl.appendChild(b)});ensureFits()}
function choose(idx,btn){if(btn.disabled)return;btn.style.filter="brightness(1.15)";btn.style.transform="scale(.98)";state.answers[state.i]=idx;next()}
function next(){const wrap=document.getElementById("qWrap");wrap.classList.remove("fade-in");wrap.classList.add("fade-out");setTimeout(()=>{state.i++;if(state.i<quiz.length){wrap.classList.remove("fade-out");wrap.classList.add("fade-in");render()}else{finish()}},220)}
function finish(){progressFill.style.width="100%";progressTxt.textContent=`${quiz.length}/${quiz.length}`;setTimeout(()=>{showSummary()},500)}
function showSummary(){game.classList.add("hidden");summary.classList.remove("hidden");document.documentElement.style.overflowY="auto";document.body.style.overflowY="auto";document.documentElement.style.overscrollBehavior="auto";document.body.style.overscrollBehavior="auto";list.innerHTML="";quiz.forEach((it,idx)=>{const your=state.answers[idx];const ok=your===it.a;const li=document.createElement("div");li.className="item";const yourTxt=clampText(it.opts[your]??"—");const okTxt=clampText(it.opts[it.a]);li.innerHTML=`<div class="q">${idx+1}. ${it.q}</div><div class="${ok?"good":"bad"}">Tu respuesta: ${yourTxt}</div><div>Correcta: <span class="good">${okTxt}</span></div><div class="explain">${it.ex}</div>`;list.appendChild(li)})}
function assertNoOverflow(){const s=game;return s.scrollHeight<=s.clientHeight}
function applyCompactMode(on=true){if(on)game.classList.add("compact");else game.classList.remove("compact")}
function fitBoardToViewport(){/* placeholder tunables if needed */}
function autoscaleUI(){const s=game;const ratio=s.clientHeight/scrollH(s);let scale=Math.min(1,Math.max(.88,ratio*0.985));s.style.setProperty("--ui-scale",scale)}
function scrollH(el){return Math.max(el.scrollHeight,el.getBoundingClientRect().height)}
function ensureFits(){requestAnimationFrame(()=>{applyCompactMode(false);game.style.setProperty("--ui-scale",1);if(!assertNoOverflow()){applyCompactMode(true)}if(!assertNoOverflow()){fitBoardToViewport()}if(!assertNoOverflow()){autoscaleUI()}})}
startBtn.onclick=()=>{intro.classList.add("hidden");render();ensureFits()};
window.addEventListener("resize",ensureFits,{passive:true});window.addEventListener("orientationchange",()=>setTimeout(ensureFits,200));
document.addEventListener("visibilitychange",()=>{if(!document.hidden)ensureFits()});
document.addEventListener("keydown",e=>{if(intro.classList.contains("hidden")&&!summary||summary.classList.contains("hidden")){if(e.key==="1"||e.key==="2"||e.key==="3"||e.key==="4"){const i=parseInt(e.key,10)-1;const b=optionsEl.children[i];if(b)b.click()}}});
function completeTask(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage(JSON.stringify({action:"TASK_COMPLETED"}))}}
</script>
</body></html>