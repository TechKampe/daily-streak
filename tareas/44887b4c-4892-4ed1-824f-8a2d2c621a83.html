
<!DOCTYPE html>
<html lang="es" class="gameplay">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Fichaje Estrella: La Entrevista ğŸ’¼ - KÃ¤mpe Games</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://techkampe.github.io/daily-streak/assets/css/daily_tasks.css">
</head>
<body>
<div class="scene gameplay" id="scene">
<div class="hud">
<div class="hud-titles">
<div class="brand">Fichaje Estrella: La Entrevista ğŸ’¼</div>
<div class="subtitle" id="subtitle">Entrevista de trabajo</div>
</div>
<div class="progress-row">
<div class="bar-wrap">
<span class="bar-label">Progreso</span>
<div class="bar"><i id="progress" style="width:0%"></i></div>
</div>
<span class="badge" id="counter">0/5</span>
</div>
</div>
<div class="main" id="main">
<div class="chat-container" id="chatContainer"></div>
</div>
<div class="footer" id="footer">
<div class="helper" id="helper">Lee y elige tu respuesta</div>
<div class="options" id="options"></div>
</div>
</div>
<img class="avatar" src="https://techkampe.github.io/daily-streak/assets/Avatar%203_low.png" alt="" loading="lazy">
<script>
const avatars={
recruiter:{name:"Marta (Reclutadora)",img:"https://techkampe.github.io/daily-streak/assets/Avatar%203_low.png"},
player:{name:"TÃº",img:"https://techkampe.github.io/daily-streak/assets/Avatar%202_low.png"}
};

const turns=[
{
messages:[
{from:"recruiter",text:"Â¡Hola! Soy Marta, de ClimaFrÃ­o S.L. ğŸ‘‹"},
{from:"recruiter",text:"EstÃ¡s en la fase final para aprendiz de climatizaciÃ³n. Â¿Listo para charlar?"}
],
options:[
{text:"Â¡SÃ­, encantado! Gracias por la oportunidad",score:2,reaction:"Â¡Genial! Me gusta tu actitud ğŸ˜Š"},
{text:"Claro, cuando quieras",score:1,reaction:"Perfecto, vamos allÃ¡"},
{text:"Supongo que sÃ­...",score:0,reaction:"Hmm, esperaba mÃ¡s entusiasmo..."}
]
},
{
messages:[
{from:"recruiter",text:"CuÃ©ntame, Â¿por quÃ© te interesa la climatizaciÃ³n?"}
],
options:[
{text:"Me apasiona la tÃ©cnica y tiene mucho futuro",score:2,reaction:"Â¡Eso es! Sector en auge ğŸ“ˆ"},
{text:"Busco un trabajo estable",score:1,reaction:"Entiendo, es importante"},
{text:"No sÃ©, me lo recomendaron",score:0,reaction:"Mmm, deberÃ­as reflexionarlo..."}
]
},
{
messages:[
{from:"recruiter",text:"Veo que no tienes experiencia previa. Â¿CÃ³mo lo compensarÃ­as?"}
],
options:[
{text:"Con ganas de aprender y esfuerzo extra",score:2,reaction:"Â¡Actitud 10! Eso valoramos mucho ğŸ’ª"},
{text:"Aprendo rÃ¡pido en el trabajo",score:1,reaction:"Bien, la prÃ¡ctica es clave"},
{text:"Espero que me enseÃ±en todo",score:0,reaction:"Necesitamos iniciativa propia..."}
]
},
{
messages:[
{from:"recruiter",text:"Â¿QuÃ© harÃ­as si un cliente se queja del trabajo?"}
],
options:[
{text:"Escuchar, disculparme y buscar soluciÃ³n",score:2,reaction:"Â¡Perfecto! AsÃ­ se gestiona ğŸ‘"},
{text:"Llamar a mi supervisor",score:1,reaction:"EstÃ¡ bien pedir ayuda"},
{text:"Decirle que no es mi culpa",score:0,reaction:"Eso empeorarÃ­a las cosas..."}
]
},
{
messages:[
{from:"recruiter",text:"Ãšltima pregunta: Â¿DÃ³nde te ves en 2 aÃ±os?"}
],
options:[
{text:"Creciendo aquÃ­ como tÃ©cnico cualificado",score:2,reaction:"Â¡Eso queremos oÃ­r! Bienvenido al equipo ğŸ‰"},
{text:"Aprendiendo todo lo posible",score:1,reaction:"Bien, el aprendizaje es continuo"},
{text:"No lo he pensado mucho",score:0,reaction:"DeberÃ­as tener metas claras..."}
]
}
];

let currentTurn=0,answers=[],totalScore=0;
const scene=document.getElementById('scene'),chatContainer=document.getElementById('chatContainer'),optionsEl=document.getElementById('options'),helper=document.getElementById('helper'),progress=document.getElementById('progress'),counter=document.getElementById('counter'),subtitle=document.getElementById('subtitle');

function addMessage(from,text,isPlayer=false){
const msg=document.createElement('div');
msg.className='chat-msg '+(isPlayer?'chat-player':'chat-npc');
msg.innerHTML=`
<img class="chat-avatar" src="${avatars[from].img}" alt="${avatars[from].name}">
<div class="chat-bubble ${isPlayer?'chat-bubble-player':''}">${text}</div>
`;
chatContainer.appendChild(msg);
chatContainer.scrollTop=chatContainer.scrollHeight;
}

function updateProgress(){
const pct=(currentTurn/turns.length)*100;
progress.style.width=pct+'%';
counter.textContent=currentTurn+'/'+turns.length;
}

function showTurn(){
if(currentTurn>=turns.length){
setTimeout(showResults,500);
return;
}
const turn=turns[currentTurn];
turn.messages.forEach(m=>addMessage(m.from,m.text));
optionsEl.innerHTML=turn.options.map((o,i)=>
`<button class="btn-option" onclick="selectOption(${i})">${o.text}</button>`
).join('');
helper.textContent='Elige tu respuesta';
updateProgress();
ensureFits();
}

function selectOption(idx){
const turn=turns[currentTurn];
const opt=turn.options[idx];
addMessage('player',opt.text,true);
totalScore+=opt.score;
answers.push({
question:turn.messages[turn.messages.length-1].text,
answer:opt.text,
score:opt.score,
maxScore:2
});
optionsEl.innerHTML='';
helper.textContent='...';
setTimeout(()=>{
addMessage('recruiter',opt.reaction);
currentTurn++;
setTimeout(()=>{
if(currentTurn<turns.length){
showTurn();
}else{
updateProgress();
setTimeout(showResults,500);
}
},800);
},500);
}

function showResults(){
document.documentElement.classList.replace('gameplay','results');
scene.classList.replace('gameplay','results');
const maxTotal=turns.length*2;
const pct=Math.round((totalScore/maxTotal)*100);
let verdict='';
if(pct>=80)verdict='Â¡Excelente! Tienes madera de profesional ğŸŒŸ';
else if(pct>=50)verdict='Bien, pero puedes mejorar tu comunicaciÃ³n ğŸ’ª';
else verdict='Necesitas trabajar tu actitud en entrevistas ğŸ“š';

scene.innerHTML=`
<div class="results-header">
<div class="results-title">Entrevista completada</div>
<div class="results-score">${totalScore}/${maxTotal}</div>
<div class="results-subtitle">${verdict}</div>
</div>
<div class="results-list">
${answers.map((a,i)=>`
<div class="result-item ${a.score===2?'correct':a.score===1?'':'incorrect'}">
<div class="result-question">${i+1}. ${a.question}</div>
<div class="result-answer">Tu respuesta: ${a.answer}</div>
<div class="result-explanation">${getExplanation(i,a.score)}</div>
</div>
`).join('')}
<div class="result-item">
<div class="result-question">ğŸ’¡ Consejo prÃ¡ctico</div>
<div class="result-explanation">En una entrevista real, muestra siempre entusiasmo, habla de tus ganas de aprender y ten claras tus metas. Â¡La actitud marca la diferencia!</div>
</div>
</div>
<div class="footer footer-fixed">
<button class="cta" onclick="completeTask()">Ver mi recompensa</button>
</div>
`;
}

function getExplanation(idx,score){
const explanations=[
["Mostrar entusiasmo desde el inicio causa buena impresiÃ³n.","Respuesta correcta pero podrÃ­as ser mÃ¡s expresivo.","La falta de interÃ©s es seÃ±al de alarma para el reclutador."],
["Demostrar pasiÃ³n y visiÃ³n de futuro es clave.","La estabilidad es vÃ¡lida, pero aÃ±ade motivaciÃ³n tÃ©cnica.","Investiga siempre sobre el puesto antes de la entrevista."],
["La actitud proactiva compensa la falta de experiencia.","Bien, pero destaca quÃ© harÃ¡s tÃº, no solo esperar.","Los empleadores buscan iniciativa, no dependencia."],
["Escucha activa y soluciÃ³n: gestiÃ³n profesional de conflictos.","Pedir ayuda estÃ¡ bien, pero intenta resolver primero.","Nunca culpes al cliente; busca siempre soluciones."],
["Tener metas claras demuestra compromiso y ambiciÃ³n.","Aprender es bueno, pero concreta tus objetivos.","Prepara siempre tu visiÃ³n de futuro profesional."]
];
return explanations[idx][2-score];
}

function completeTask(){
if(window.ReactNativeWebView){
window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));
}
}

function ensureFits(){
scene.classList.remove('compact','compact-xs');
document.documentElement.style.setProperty('--ui-scale',1);
if(scene.scrollHeight>scene.clientHeight)scene.classList.add('compact');
if(scene.scrollHeight>scene.clientHeight)scene.classList.add('compact-xs');
if(scene.scrollHeight>scene.clientHeight){
document.documentElement.style.setProperty('--ui-scale',Math.max(0.88,scene.clientHeight/scene.scrollHeight));
}
}

window.addEventListener('load',()=>{ensureFits();showTurn();});
window.addEventListener('resize',ensureFits);
window.addEventListener('orientationchange',()=>setTimeout(ensureFits,100));
</script>
<style>
.chat-container{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:8px;-webkit-overflow-scrolling:touch;}
.chat-msg{display:flex;align-items:flex-end;gap:8px;max-width:85%;}
.chat-npc{align-self:flex-start;}
.chat-player{align-self:flex-end;flex-direction:row-reverse;}
.chat-avatar{width:32px;height:32px;border-radius:50%;object-fit:cover;flex-shrink:0;}
.chat-bubble{background:var(--surface);padding:10px 14px;border-radius:16px;font-size:14px;line-height:1.4;box-shadow:0 1px 2px rgba(0,0,0,0.1);}
.chat-bubble-player{background:var(--brand);color:#000;}
.main{display:flex;flex-direction:column;flex:1;overflow:hidden;min-height:0;}
#options{display:flex;flex-direction:column;gap:8px;width:100%;}
.footer-fixed{position:sticky;bottom:0;background:var(--bg);padding-top:12px;}
.results-list{padding:0 16px 100px 16px;overflow-y:auto;}
</style>
</body>
</html>
