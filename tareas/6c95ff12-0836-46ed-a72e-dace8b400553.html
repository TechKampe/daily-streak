<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><title>Checklist de Taller</title><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet"><style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{--ui-scale:1;--itemH:116px;--catH:64px;--gap:12px}
html,body{margin:0;height:100%;overflow:hidden;overscroll-behavior:none;background:#fff;color:#1A1B2F;font-family:"Baloo 2",system-ui,-apple-system,Segoe UI,Roboto,Arial}
body.results-on,html.results-on{overflow-y:auto;overscroll-behavior:auto}
button{font-family:inherit}
.scene{position:relative;width:100%;padding:0 16px 16px;touch-action:none;transform-origin:top center;contain:layout paint}
@supports(height:100svh){.scene{height:100svh}}
@supports not (height:100svh){@supports(height:100dvh){.scene{height:100dvh}}}
@supports not (height:100dvh){.scene{height:100vh}}
.scene{padding-left:calc(16px + env(safe-area-inset-left));padding-right:calc(16px + env(safe-area-inset-right));padding-bottom:calc(16px + env(safe-area-inset-bottom))}
.safe-top-blank{height:80px}
.spare-top-right{position:absolute;top:0;right:0;width:100px;height:100px;pointer-events:none}
.avatar{position:absolute;bottom:8px;left:8px;width:180px;opacity:.08;user-select:none;pointer-events:none}
.hud{display:flex;align-items:center;gap:10px;margin-top:2px}
.title{font-weight:700;font-size:clamp(18px,4.2vw,26px);line-height:1.1;flex:1;max-width:75%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.step{font-size:12px;color:#00E6BC;border:1px solid #00E6BC;border-radius:12px;padding:4px 8px;white-space:nowrap}
#ui{transform:scale(var(--ui-scale));transform-origin:top center}
.main{display:flex;flex-direction:column;gap:var(--gap);margin-top:8px}
.item-card{height:var(--itemH);border:1px solid #00E6BC;border-radius:16px;display:flex;align-items:center;justify-content:center;padding:10px 12px;text-align:center;font-weight:700;font-size:clamp(18px,5vw,24px)}
.item-card .label{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.category-row{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:2px}
.cat{height:var(--catH);min-height:56px;background:#0B214A;color:#00E6BC;border:1px solid #00E6BC;border-radius:24px;box-shadow:0 8px 18px rgba(11,33,74,.25);font-weight:700;font-size:clamp(14px,3.8vw,16px);display:flex;align-items:center;justify-content:center;padding:0 10px;cursor:pointer}
.cat:disabled{opacity:.4;box-shadow:none}
.cat:focus-visible{outline:2px dashed #00E6BC;outline-offset:3px}
.cat .t{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-align:center}
.cat.pulse::after{content:"";position:absolute;inset:0;border-radius:24px;box-shadow:0 0 0 0 rgba(4,255,180,.6);animation:pulse .6s ease-out}
@keyframes pulse{to{box-shadow:0 0 0 18px rgba(4,255,180,0)}}
.progress{display:flex;align-items:center;gap:10px;margin-top:2px}
.bar{flex:1;height:8px;background:#E8FDF6;border-radius:8px;overflow:hidden;border:1px solid #C5FFDF}
.fill{height:100%;width:0;background:#04FFB4;transition:width .25s ease}
.pct{font-weight:700;font-size:13px;color:#0B214A}
.drop{position:fixed;width:14px;height:14px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#C5FFDF 0,#00E6BC 60%,#0B214A 100%);pointer-events:none;z-index:9}
.modal{position:fixed;inset:0;background:rgba(26,27,47,.06);display:flex;align-items:center;justify-content:center;padding:16px;z-index:15}
.card{background:#fff;border:1px solid #00E6BC;border-radius:16px;max-width:560px;width:100%;max-height:90svh;overflow-y:auto;padding:18px 16px}
.card h2{margin:0 0 6px 0;font-size:clamp(18px,4.6vw,24px)}
.card p{margin:0 0 12px 0;font-size:clamp(14px,3.8vw,16px)}
.btn{background:#0B214A;color:#00E6BC;border:1px solid #00E6BC;border-radius:24px;box-shadow:0 8px 18px rgba(11,33,74,.25);padding:12px 16px;width:100%;font-weight:700;font-size:clamp(15px,4vw,17px);cursor:pointer}
.btn:disabled{opacity:.4;box-shadow:none}
.btn:focus-visible{outline:2px dashed #00E6BC;outline-offset:3px}
.info{background:#C5FFDF;color:#0B214A;padding:8px 10px;border-radius:12px;border:1px solid #00E6BC;font-size:13px;margin-bottom:8px}
.results{position:fixed;inset:0;background:#fff;z-index:20;display:none}
.results.show{display:block}
.res-wrap{display:flex;flex-direction:column;height:100%;padding:14px 16px 16px}
.res-head{display:flex;align-items:center;gap:8px;margin-top:6px}
.res-head h2{margin:0;font-size:clamp(18px,4.6vw,24px);flex:1}
.badge-ok{color:#0B214A;background:#C5FFDF;border:1px solid #00E6BC;border-radius:12px;padding:6px 10px;font-weight:700;font-size:12px}
.res-list{margin-top:8px;border-top:1px solid #E3FFF2;overflow-y:auto;max-height:90svh;padding-bottom:86px}
.ri{padding:10px 0;border-bottom:1px solid #E3FFF2;display:grid;grid-template-columns:1fr;gap:6px}
.ri .name{font-weight:700}
.tag{display:inline-block;border:1px solid #00E6BC;border-radius:12px;padding:4px 8px;margin-right:6px;font-size:12px}
.ok .name{color:#0B214A}
.ok .tag.me{border-color:#04FFB4;color:#0B214A}
.ok .tag.right{background:#C5FFDF}
.err .name{color:#F9577E}
.err .tag.me{border-color:#F9577E;color:#F9577E}
.exp{font-size:13px;color:#1A1B2F}
.tip{margin-top:10px}
.tip .info{margin:0}
.cta-wrap{position:sticky;bottom:0;background:linear-gradient(180deg,rgba(255,255,255,0) 0, #fff 30%);padding-top:12px}
.scene.compact .title{font-size:clamp(16px,3.6vw,20px)}
.scene.compact .item-card{height:100px}
.scene.compact .cat{min-height:52px}
.scene.compact .progress{margin-top:0}
</style></head><body>
<div class="scene" id="scene">
<div class="safe-top-blank"></div>
<div class="spare-top-right"></div>
<img class="avatar" src="https://techkampe.github.io/daily-streak/assets/Avatar 3_low.png" alt="" loading="eager">
<div id="ui">
<div class="hud">
<div class="title" aria-live="polite">Checklist de Taller: ¬øTodo en su sitio? üõ†Ô∏è</div>
<div class="step" id="step">1/10</div>
</div>
<div class="main" aria-live="polite">
<div class="item-card" id="itemCard"><div class="label">‚Äî</div></div>
<div class="category-row" id="cats">
<button class="cat" aria-label="Categor√≠a EPIs" data-cat="EPIs"><span class="t">EPIs</span></button>
<button class="cat" aria-label="Categor√≠a Herramienta Manual" data-cat="Herramienta Manual"><span class="t">Herramienta Manual</span></button>
<button class="cat" aria-label="Categor√≠a Herramienta El√©ctrica" data-cat="Herramienta El√©ctrica"><span class="t">Herramienta El√©ctrica</span></button>
</div>
<div class="progress">
<div class="bar"><div class="fill" id="fill"></div></div>
<div class="pct" id="pct">0%</div>
</div>
</div>
</div>
</div>

<div class="modal" id="intro">
<div class="card" role="dialog" aria-modal="true">
<h2>Checklist de Taller: ¬øTodo en su sitio? üõ†Ô∏è</h2>
<p>Asigna cada objeto a su categor√≠a tocando un bot√≥n. Avanza solo tras cada elecci√≥n.</p>
<div class="info">Aprender√°s a distinguir EPIs, herramientas manuales y el√©ctricas.</div>
<button class="btn" id="start">Empezar</button>
</div>
</div>

<div class="results" id="results" aria-live="polite">
<div class="res-wrap">
<div class="res-head">
<h2>Tu organizaci√≥n del banco de trabajo</h2>
<div class="badge-ok" id="scoreBadge">0/10</div>
</div>
<div class="tip"><div class="info">Consejo: Primero separa lo que te protege (EPIs). Luego distingue si la herramienta funciona con tu fuerza (manual) o con energ√≠a (el√©ctrica).</div></div>
<div class="res-list" id="resList"></div>
<div class="cta-wrap">
<button class="btn" onclick="completeTask()">Ver mi recompensa</button>
</div>
</div>
</div>

<script>
(function(){
const ITEMS=[
{name:"Casco de seguridad",cat:"EPIs",exp:"Protege la cabeza frente a golpes o ca√≠das de objetos."},
{name:"Guantes de seguridad",cat:"EPIs",exp:"Evitan cortes, abrasiones y algunos riesgos el√©ctricos."},
{name:"Gafas de protecci√≥n",cat:"EPIs",exp:"Bloquean polvo y salpicaduras que da√±an los ojos."},
{name:"Botas con puntera",cat:"EPIs",exp:"Refuerzan el pie ante aplastamientos y pinchazos."},
{name:"Llave inglesa",cat:"Herramienta Manual",exp:"Ajusta tuercas y tornillos sin usar electricidad."},
{name:"Destornillador",cat:"Herramienta Manual",exp:"Permite atornillar y desatornillar a mano con control."},
{name:"Serrucho manual",cat:"Herramienta Manual",exp:"Corta materiales con esfuerzo f√≠sico y precisi√≥n."},
{name:"Taladro percutor",cat:"Herramienta El√©ctrica",exp:"Perfora muros gracias a su motor y percusi√≥n."},
{name:"Amoladora angular",cat:"Herramienta El√©ctrica",exp:"Corta y desbasta con disco accionado por motor."},
{name:"Atornillador el√©ctrico",cat:"Herramienta El√©ctrica",exp:"Atornilla r√°pido con motor y bater√≠a."}
];
const CATS=["EPIs","Herramienta Manual","Herramienta El√©ctrica"];
const scene=document.getElementById("scene");
const itemCard=document.getElementById("itemCard");
const catsEl=document.getElementById("cats");
const fill=document.getElementById("fill");
const pct=document.getElementById("pct");
const step=document.getElementById("step");
const intro=document.getElementById("intro");
const results=document.getElementById("results");
const resList=document.getElementById("resList");
const scoreBadge=document.getElementById("scoreBadge");
let index=0,answers=[];
function clampText(s,max){return s.length>48?s.slice(0,45)+"‚Ä¶":s}
function setDisabled(v){[...catsEl.querySelectorAll(".cat")].forEach(b=>b.disabled=v)}
function renderTurn(){
const it=ITEMS[index];
itemCard.querySelector(".label").textContent=clampText(it.name,48);
step.textContent=(index+1)+"/"+ITEMS.length;
const p=((index)/ITEMS.length*100)|0;fill.style.width=p+"%";pct.textContent=p+"%";
ensureFits()
}
function animateDrop(target){
const rFrom=itemCard.getBoundingClientRect(),rTo=target.getBoundingClientRect();
const sx=rFrom.left+rFrom.width/2,sy=rFrom.top+rFrom.height-10;
const tx=rTo.left+rTo.width/2,ty=rTo.top+rTo.height/2;
const d=document.createElement("div");d.className="drop";d.style.left=(sx-7)+"px";d.style.top=(sy-7)+"px";document.body.appendChild(d);
d.animate([{transform:"translate(0,0) scale(1)"},{transform:`translate(${tx-sx}px,${ty-sy}px) scale(.8)`}],{duration:320,easing:"cubic-bezier(.2,.9,.2,1)"})
.onfinish=()=>{d.remove()}
}
catsEl.addEventListener("click",e=>{
const btn=e.target.closest(".cat");if(!btn)return;
setDisabled(true);btn.classList.add("pulse");animateDrop(btn);
const chosen=btn.dataset.cat,correct=ITEMS[index].cat,ok=chosen===correct;
answers.push({i:index,name:ITEMS[index].name,chosen,correct,exp:ITEMS[index].exp,ok});
setTimeout(()=>{btn.classList.remove("pulse");index++;
if(index<ITEMS.length){renderTurn();setDisabled(false)}
else{setTimeout(showResults,500)}},360)
});
function showResults(){
const score=answers.filter(a=>a.ok).length;scoreBadge.textContent=score+"/"+ITEMS.length;
resList.innerHTML="";
answers.forEach((a,idx)=>{
const row=document.createElement("div");row.className="ri "+(a.ok?"ok":"err");
row.innerHTML=`<div class="name">${idx+1}. ${clampText(a.name,48)}</div>
<div><span class="tag me">T√∫: ${a.chosen}</span><span class="tag right">Correcta: ${a.correct}</span></div>
<div class="exp">${a.exp}</div>`;
resList.appendChild(row)
});
intro.style.display="none";results.classList.add("show");
document.body.classList.add("results-on");document.documentElement.classList.add("results-on")
}
document.getElementById("start").addEventListener("click",()=>{intro.style.display="none";setDisabled(false);renderTurn();ensureFits()});
window.addEventListener("resize",()=>ensureFits());
window.addEventListener("orientationchange",()=>setTimeout(ensureFits,150));
function assertNoOverflow(){const s=scene;return s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth}
function applyCompactMode(){scene.classList.add("compact")}
function fitBoardToViewport(){document.documentElement.style.setProperty("--catH","58px");document.documentElement.style.setProperty("--itemH","100px")}
function autoscaleUI(){
let scale=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ui-scale"))||1;
if(assertNoOverflow())return;
scale=0.96;document.documentElement.style.setProperty("--ui-scale",scale);
if(assertNoOverflow())return;
scale=0.92;document.documentElement.style.setProperty("--ui-scale",scale);
if(assertNoOverflow())return;
scale=0.88;document.documentElement.style.setProperty("--ui-scale",scale)
}
function resetFit(){
scene.classList.remove("compact");
document.documentElement.style.setProperty("--ui-scale","1");
document.documentElement.style.setProperty("--catH","64px");
document.documentElement.style.setProperty("--itemH","116px")
}
function ensureFits(){
if(results.classList.contains("show"))return;
resetFit();if(assertNoOverflow())return;
applyCompactMode();if(assertNoOverflow())return;
fitBoardToViewport();if(assertNoOverflow())return;
autoscaleUI()
}
document.addEventListener("keydown",e=>{if(e.key==="Enter"&&intro.style.display!=="none"){document.getElementById("start").click()}});
setDisabled(true);renderTurn()
})();
function completeTask(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}))}}
</script>
</body></html>