<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><title>Kämpe • Conecta con el vocabulario correcto ⚡️</title><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet"><style>
:root{--bg:#FFF;--txt:#1A1B2F;--deep:#0B214A;--teal:#00E6BC;--ok:#04FFB4;--err:#F9577E;--soft:#C5FFDF;--ui-scale:1}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;background:#FFF;color:var(--txt);font-family:"Baloo 2",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
html,body{overflow:hidden;overscroll-behavior:none}
body.final{overflow-y:auto}
button{font-family:inherit}
.app{position:relative;transform:scale(var(--ui-scale));transform-origin:top left}
.scene{position:relative;display:flex;flex-direction:column;gap:12px;padding:16px;padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,calc(env(safe-area-inset-right) + 110px));padding-top:max(20px,calc(env(safe-area-inset-top) + 12px));padding-bottom:max(16px,env(safe-area-inset-bottom));touch-action:none}
@supports(height:100svh){.scene{height:100svh}}
@supports not (height:100svh){@supports(height:100dvh){.scene{height:100dvh}}}
@supports not (height:100dvh){.scene{height:100vh}}
.hud{min-height:54px;display:flex;flex-direction:column;justify-content:flex-end}
.steprow{display:flex;align-items:center;gap:8px}
.step{font-size:clamp(12px,2.6vw,14px);color:var(--teal);letter-spacing:.3px}
.bar{height:8px;background:#E8FFF6;border:1px solid var(--teal);border-radius:999px;overflow:hidden;box-shadow:inset 0 0 0 1px rgba(0,230,188,.12)}
.fill{height:100%;width:0;background:linear-gradient(90deg,var(--ok),#00e6bc);transition:width .35s ease}
.tutorial{margin-top:8px;background:#C5FFDF;color:#0B214A;border-radius:12px;padding:8px 10px;align-self:flex-start;font-size:clamp(12px,2.8vw,14px);max-width:92%;line-height:1.1}
.main{flex:1;display:flex;flex-direction:column;justify-content:space-between}
.sentenceWrap{display:flex;flex-direction:column;gap:12px;justify-content:center}
.title{font-weight:700;font-size:clamp(18px,5.4vw,22px);line-height:1.2;letter-spacing:.2px;max-width:780px;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.blank{display:inline-block;border-bottom:3px solid var(--teal);padding:0 6px;min-width:90px;text-decoration:none}
.blank.filled{background:linear-gradient(180deg,rgba(0,230,188,.18),rgba(0,230,188,.03));border-bottom-color:transparent;border-radius:8px}
.blank.ok{box-shadow:0 0 0 2px var(--ok) inset}
.blank.bad{box-shadow:0 0 0 2px var(--err) inset}
.options{display:grid;grid-template-columns:1fr;gap:12px;margin-top:auto}
@media(min-width:380px){.options{grid-template-columns:1fr 1fr}}
.opt{position:relative;display:flex;align-items:center;justify-content:center;height:56px;border:1px solid var(--teal);border-radius:24px;background:#FFF;color:var(--txt);box-shadow:0 8px 18px rgba(11,33,74,.12);padding:10px 14px;font-weight:600;font-size:clamp(14px,3.6vw,16px);cursor:pointer;transition:transform .12s ease,box-shadow .12s ease,background .2s;border-color:var(--teal)}
.opt:active{transform:scale(.98)}
.opt[aria-disabled="true"]{opacity:.5;pointer-events:none;box-shadow:none}
.opt.correct{background:#C5FFDF;border-color:var(--ok)}
.opt.wrong{border-color:var(--err)}
.opt span{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;max-width:100%}
.cta{height:56px;background:#0B214A;color:#00E6BC;border:0;border-radius:24px;box-shadow:0 8px 18px rgba(11,33,74,.25);font-weight:700;font-size:clamp(16px,4vw,18px);cursor:pointer}
.cta:disabled{opacity:.4;box-shadow:none}
.fade{animation:fade .28s ease}
@keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
.avatar{position:absolute;left:8px;bottom:8px;opacity:.14;max-width:42vw;max-height:38vh;pointer-events:none;user-select:none}
.intro,.results{position:fixed;inset:0;padding:16px;padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right));padding-top:max(16px,calc(env(safe-area-inset-top) + 10px));padding-bottom:max(16px,env(safe-area-inset-bottom));background:rgba(255,255,255,.96);backdrop-filter:saturate(1.2) blur(3px);display:flex;align-items:center;justify-content:center;z-index:10}
.modal{width:100%;max-width:720px;max-height:90svh;overflow-y:auto;background:#FFF;border:1px solid var(--teal);border-radius:18px;padding:18px;display:flex;flex-direction:column;gap:12px}
.mh{font-size:clamp(18px,5.4vw,22px);font-weight:700;color:var(--txt)}
.md{font-size:clamp(14px,3.6vw,16px);line-height:1.25;color:#0B214A}
.modal .cta{margin-top:4px}
.hidden{display:none}
.results{background:#FFF}
.results .wrap{width:100%;max-width:820px;margin:0 auto;display:flex;flex-direction:column;gap:16px}
.score{font-size:clamp(18px,5vw,22px);font-weight:700;color:var(--txt)}
.item{border:1px solid var(--teal);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:6px}
.item .ph{font-weight:700;color:var(--txt);font-size:clamp(14px,3.8vw,16px)}
.tag{display:inline-flex;align-items:center;gap:6px;font-size:13px;padding:4px 8px;border-radius:12px;border:1px solid transparent;width:max-content}
.tag.ok{border-color:var(--ok);color:#0B214A;background:#C5FFDF}
.tag.bad{border-color:var(--err);color:#F9577E;background:#FFE4EA}
.note{font-size:13px;color:#0B214A}
.tip{background:#C5FFDF;color:#0B214A;padding:10px;border-radius:12px;border:1px solid var(--teal)}
.footerBtn{position:sticky;bottom:0;display:flex;gap:8px;background:#FFF;padding-top:6px}
.compact .title{font-size:clamp(16px,4.2vw,20px)}
.compact .opt{height:52px}
.compact .hud{min-height:42px}
:focus-visible{outline:3px solid rgba(0,230,188,.8);outline-offset:2px;border-radius:12px}
</style></head><body>
<img class="avatar" src="https://techkampe.github.io/daily-streak/assets/Avatar 2_low.png" alt="Mentor avatar" width="512" height="512" loading="eager">
<div class="scene app" role="application" aria-label="Desafío: Conecta con el vocabulario correcto">
  <div class="hud">
    <div class="steprow"><div class="step" aria-live="polite"><span id="stepNum">Paso 1</span> de 6</div></div>
    <div class="bar" aria-hidden="true"><div class="fill" id="fill"></div></div>
    <div class="tutorial" id="tut">Elige la palabra que completa la frase. Avanza con cada acierto.</div>
  </div>
  <div class="main">
    <div class="sentenceWrap fade">
      <div class="title" id="sentence">Para medir tensión, uso el <span class="blank" id="blank">___</span>.</div>
    </div>
    <div class="options">
      <button class="opt" id="optA" aria-label="Opción A"><span></span></button>
      <button class="opt" id="optB" aria-label="Opción B"><span></span></button>
    </div>
  </div>
</div>

<div class="intro" id="intro" role="dialog" aria-modal="true" aria-labelledby="introH">
  <div class="modal">
    <div class="mh" id="introH">Conecta con el vocabulario correcto ⚡️</div>
    <div class="md">Tu mentor quiere que domines la jerga antes de instalar. Completa 6 frases clave eligiendo el término exacto para cada hueco. Precisión primero, cables después.</div>
    <button class="cta" id="start">Empezar</button>
  </div>
</div>

<div class="results hidden" id="results" aria-live="polite">
  <div class="wrap">
    <div class="mh">Resultados</div>
    <div class="score" id="scoreTxt">Tu puntuación: 0/6</div>
    <div id="list"></div>
    <div class="tip">Consejo final: usa siempre el término específico (multímetro, diferencial, magnetotérmico). Decirlo bien evita errores y mejora tu coordinación en obra.</div>
    <div class="footerBtn"><button class="cta" onclick="completeTask()">Ver mi recompensa</button></div>
  </div>
</div>

<script>
const DATA=[{q:"Para medir tensión, uso el ___." ,correct:"multímetro",options:["multímetro","buscapolos"],why:{c:"El multímetro mide V, A y Ω.",alt:{buscapolos:"Solo detecta presencia de fase; no mide tensión."}}},{q:"El ___ protege ante fugas a tierra.",correct:"diferencial",options:["diferencial","magnetotérmico"],why:{c:"El diferencial detecta corrientes de fuga.",alt:{magnetotérmico:"Protege de sobrecargas y cortocircuitos, no de fugas."}}},{q:"La corriente se mide en ___.",correct:"amperios",options:["amperios","voltios"],why:{c:"La intensidad se expresa en A.",alt:{voltios:"Voltios es tensión, no corriente."}}},{q:"Para cortar el paso en un circuito uso un ___.",correct:"interruptor",options:["interruptor","enchufe"],why:{c:"Un interruptor abre/cierra el circuito.",alt:{enchufe:"Es una toma; no interrumpe el circuito."}}},{q:"Para medir intensidad sin abrir, uso la ___.",correct:"pinza amperimétrica",options:["pinza amperimétrica","multímetro"],why:{c:"Mide A por campo magnético sin desconectar.",alt:{multímetro:"Para medir A requiere conexión en serie."}}},{q:"El ___ corta por sobrecarga o cortocircuito.",correct:"magnetotérmico",options:["magnetotérmico","diferencial"],why:{c:"Protección térmica y magnética ante sobrecargas/cortos.",alt:{diferencial:"Actúa por fugas a tierra, no por sobrecarga."}}}];
let idx=0,answers=[],locked=false,uiScale=1;
const scene=document.querySelector('.scene'),fill=document.getElementById('fill'),stepNum=document.getElementById('stepNum'),sentenceEl=document.getElementById('sentence'),blank=document.getElementById('blank'),optA=document.getElementById('optA'),optB=document.getElementById('optB'),intro=document.getElementById('intro'),results=document.getElementById('results'),list=document.getElementById('list'),scoreTxt=document.getElementById('scoreTxt'),tut=document.getElementById('tut');
document.getElementById('start').addEventListener('click',()=>{intro.classList.add('hidden');render();ensureFits()});
function render(){locked=false;const d=DATA[idx];stepNum.textContent=`Paso ${idx+1}`;fill.style.width=`${(idx/ DATA.length)*100}%`;sentenceEl.innerHTML=d.q.replace('___',`<span class="blank" id="blank">___</span>`);optA.className='opt';optB.className='opt';optA.setAttribute('aria-disabled','false');optB.setAttribute('aria-disabled','false');optA.querySelector('span').textContent=d.options[0];optB.querySelector('span').textContent=d.options[1];optA.onclick=()=>pick(d.options[0]);optB.onclick=()=>pick(d.options[1]);document.querySelector('.sentenceWrap').classList.add('fade');setTimeout(()=>document.querySelector('.sentenceWrap').classList.remove('fade'),200);ensureFits()}
function pick(choice){if(locked)return;locked=true;const d=DATA[idx];const correct=choice===d.correct;const b=document.getElementById('blank');b.classList.add('filled');b.textContent=choice;b.classList.add(correct?'ok':'bad');(optA.querySelector('span').textContent===choice?optA:optB).classList.add(correct?'correct':'wrong');optA.setAttribute('aria-disabled','true');optB.setAttribute('aria-disabled','true');answers.push({q:d.q,choice,correct:d.correct,isCorrect:correct,why:d.why});setTimeout(()=>{idx++;if(idx<DATA.length){render()}else{finish()}},520)}
function finish(){fill.style.width='100%';setTimeout(()=>{document.body.classList.add('final');results.classList.remove('hidden');buildResults();},520)}
function buildResults(){const total=answers.filter(a=>a.isCorrect).length;scoreTxt.textContent=`Tu puntuación: ${total}/${DATA.length}`;list.innerHTML='';answers.forEach((a,i)=>{const solved=a.q.replace('___',a.correct);const wrongKey=Object.keys(a.why.alt)[0];const wrongWhy=a.why.alt[wrongKey];const item=document.createElement('div');item.className='item';const ph=document.createElement('div');ph.className='ph';ph.textContent=solved;const tag=document.createElement('div');tag.className='tag '+(a.isCorrect?'ok':'bad');tag.textContent=`Tu respuesta: ${a.choice}`;const note1=document.createElement('div');note1.className='note';note1.textContent=`Correcta: ${a.correct} — ${a.why.c}`;const note2=document.createElement('div');note2.className='note';note2.textContent=`Por qué no: ${wrongKey} — ${wrongWhy}`;item.append(ph,tag,note1,note2);list.appendChild(item)});}
function assertNoOverflow(){const s=document.querySelector('.scene');return s.scrollHeight<=s.clientHeight}
function applyCompactMode(on){document.body.classList.toggle('compact',!!on)}
function fitBoardToViewport(){/* adjust vars if needed */ }
function autoscaleUI(min=0.88){const s=document.querySelector('.scene');let step=1;uiScale=1;document.documentElement.style.setProperty('--ui-scale',uiScale);if(assertNoOverflow())return;applyCompactMode(true);if(assertNoOverflow())return;for(let sc=0.98;sc>=min;sc-=0.02){uiScale=+sc.toFixed(2);document.documentElement.style.setProperty('--ui-scale',uiScale);if(assertNoOverflow())return}}
function ensureFits(){applyCompactMode(false);document.documentElement.style.setProperty('--ui-scale',1);fitBoardToViewport();setTimeout(()=>autoscaleUI(0.88),0)}
window.addEventListener('resize',()=>ensureFits(),{passive:true});window.addEventListener('orientationchange',()=>setTimeout(ensureFits,120));
document.addEventListener('keydown',e=>{if(results.classList.contains('hidden')){if((e.key==='1'||e.key==='a'||e.key==='A')&&!locked)optA.click();if((e.key==='2'||e.key==='b'||e.key==='B')&&!locked)optB.click();if((e.key==='Enter'||e.key===' ')&&intro&&!intro.classList.contains('hidden'))document.getElementById('start').click()}});
</script>
<script>
function completeTask(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));}}
</script>
</body></html>