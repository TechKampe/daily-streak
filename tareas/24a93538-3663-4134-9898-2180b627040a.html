<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/><title>¬°Manitas a la obra! El kit del electricista ‚ö°Ô∏è</title><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet"/><style>
*{box-sizing:border-box}html,body{height:100%}html.lock,body.lock{overflow:hidden;overscroll-behavior:none}body{margin:0;font-family:"Baloo 2",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#FFF;color:#1A1B2F}
:root{--cta:#0B214A;--ctat:#00E6BC;--accent:#04FFB4;--error:#F9577E;--border:#00E6BC;--info:#C5FFDF;--ui-scale:1;--gap:12px;--pad:16px;--cellH:70px;--title:clamp(20px,3.6vw,28px);--task:clamp(18px,3.4vw,22px);--btn:clamp(16px,3.2vw,18px)}
.scene{position:relative;width:100%;height:100vh;transform-origin:top center;transform:scale(var(--ui-scale));display:flex;flex-direction:column;padding:calc(env(safe-area-inset-top,0px)+8px) clamp(14px,4vw,20px) calc(env(safe-area-inset-bottom,0px)+10px);gap:10px;touch-action:none}
@supports(height:100svh){.scene{height:100svh}}
@supports not (height:100svh){@supports(height:100dvh){.scene{height:100dvh}}}
.scene .safeTop{height:80px;flex:0 0 auto}
.header{display:flex;align-items:center;justify-content:space-between;gap:10px}
.title{font-weight:700;font-size:var(--title);line-height:1.05;max-width:calc(100% - 110px);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.progress{min-width:100px;text-align:right}
.step{font-size:12px;color:#00E6BC}
.bar{position:relative;width:100px;height:8px;background:#E8FFF6;border:1px solid #00E6BC;border-radius:999px;overflow:hidden}
.fill{position:absolute;left:0;top:0;bottom:0;background:linear-gradient(90deg,#04FFB4,#00E6BC);width:0%}
.task{margin:0 0 2px;font-weight:600;font-size:var(--task);line-height:1.15;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.mentor{background:#C5FFDF;color:#0B214A;border-radius:12px;padding:8px 10px;font-size:14px;line-height:1.1;border:1px solid #00E6BC;display:inline-block;max-width:100%;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.board{display:grid;grid-template-columns:1fr;gap:10px;flex:1 1 auto;align-content:start}
.card{border:1px solid #00E6BC;border-radius:16px;padding:10px 12px;min-height:var(--cellH);display:flex;align-items:center;gap:10px;cursor:pointer;transition:transform .12s ease,box-shadow .2s,border-color .2s;box-shadow:0 2px 8px rgba(11,33,74,.06);background:#FFF}
.card:focus-visible{outline:2px dashed #00E6BC;outline-offset:2px}
.icon{font-size:20px;flex:0 0 auto}
.label{font-weight:600;font-size:16px;line-height:1.15;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.card.selected{box-shadow:0 8px 18px rgba(11,33,74,.25);transform:translateY(-1px)}
.card.correct{border-color:#04FFB4}
.card.wrong{border-color:#F9577E}
.feedback{min-height:18px;font-size:13px}
.feedback.ok{color:#04FFB4}
.feedback.bad{color:#F9577E}
.ctaRow{position:sticky;bottom:0;margin-top:auto;padding-top:4px}
.btn{width:100%;background:#0B214A;color:#00E6BC;border:none;border-radius:24px;box-shadow:0 8px 18px rgba(11,33,74,.25);padding:14px 18px;font-weight:700;font-size:var(--btn);letter-spacing:.2px}
.btn:disabled{opacity:.45;box-shadow:none}
.avatar{position:absolute;right:6px;top:30%;width:180px;opacity:.12;pointer-events:none;user-select:none}
.scene.compact .title{font-size:clamp(18px,3.2vw,24px)}
.scene.compact .task{font-size:clamp(16px,3vw,20px)}
.scene.compact .card{min-height:56px}
.scene.compact .label{font-size:15px}
.scene.compact .btn{font-size:clamp(15px,3vw,17px)}
.scene.compact .safeTop{height:60px}
.fade{animation:fade .25s ease}
@keyframes fade{from{opacity:.6;transform:translateY(4px)}to{opacity:1;transform:none}}
.modal{position:fixed;inset:0;background:rgba(26,27,47,.36);display:flex;align-items:center;justify-content:center;padding:20px;z-index:10}
.dialog{background:#FFF;max-width:520px;width:100%;max-height:90svh;border:1px solid #00E6BC;border-radius:18px;padding:18px;overflow-y:auto}
.dialog h2{margin:0 0 6px;font-size:clamp(20px,3.8vw,26px)}
.dialog p{margin:6px 0 14px;font-size:15px;line-height:1.2}
.dialog .btn{margin-top:6px}
.results{display:none;padding:calc(env(safe-area-inset-top,0px)+14px) clamp(14px,4vw,20px) calc(env(safe-area-inset-bottom,0px)+24px)}
.results.open{display:block}
.rHead h2{margin:0 0 4px;font-size:clamp(22px,4.2vw,28px)}
.rStat{display:flex;gap:8px;align-items:center;font-size:14px}
.pill{background:#C5FFDF;border:1px solid #00E6BC;border-radius:12px;padding:4px 8px;color:#0B214A}
.list{margin-top:10px;display:flex;flex-direction:column;gap:10px}
.item{border:1px solid #00E6BC;border-radius:14px;padding:12px;background:#FFF}
.item h3{margin:0 0 6px;font-size:16px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.row{display:flex;gap:8px;flex-wrap:wrap;font-size:14px}
.badge{border-radius:10px;padding:2px 8px;border:1px solid currentColor}
.badge.me{color:#F9577E}
.badge.ok{color:#04FFB4}
.exp{margin-top:6px;font-size:14px;line-height:1.2}
.tip{margin-top:6px;background:#C5FFDF;border:1px solid #00E6BC;border-radius:12px;padding:8px;font-size:14px;color:#0B214A}
.results .btn{position:sticky;bottom:0;margin-top:12px}
.hide{display:none}
@media(min-width:640px){.scene{max-width:480px;margin:0 auto}}
</style></head><body class="lock"><img class="avatar" src="https://techkampe.github.io/daily-streak/assets/Avatar 2_low.png" alt="" loading="eager"/>
<div class="modal" id="intro" role="dialog" aria-modal="true">
  <div class="dialog">
    <h2>¬°Manitas a la obra! El kit del electricista ‚ö°Ô∏è</h2>
    <p>Elige la herramienta correcta para cada encargo. Toca una opci√≥n y confirma. Aprende r√°pido, seguro y con precisi√≥n.</p>
    <button class="btn" id="startBtn" aria-label="Comenzar reto">Empezar</button>
  </div>
</div>

<main class="scene fade" id="scene" aria-live="polite">
  <div class="safeTop"></div>
  <div class="header">
    <div class="title" aria-label="T√≠tulo del reto">Kit del electricista</div>
    <div class="progress" aria-label="Progreso">
      <div class="step" id="stepText">1/6</div>
      <div class="bar" aria-hidden="true"><div class="fill" id="barFill"></div></div>
    </div>
  </div>
  <h2 class="task" id="taskText">Tarea</h2>
  <div class="mentor" id="mentorText">Consejo de tu mentora: conc√©ntrate y elige con calma.</div>
  <div class="board" id="board" role="group" aria-label="Opciones de herramienta"></div>
  <div class="feedback" id="feedback" aria-live="assertive"></div>
  <div class="ctaRow"><button class="btn" id="confirmBtn" disabled aria-label="Confirmar elecci√≥n">Confirmar</button></div>
</main>

<section class="results" id="results" aria-labelledby="resTitle">
  <div class="rHead">
    <h2 id="resTitle">Informe de tu primer d√≠a</h2>
    <div class="rStat"><span class="pill" id="scorePill">Aciertos 0/6</span><span class="pill" id="timePill">Tiempo: ‚Äî</span></div>
  </div>
  <div class="list" id="resList"></div>
  <button class="btn" onclick="completeTask()">Ver mi recompensa</button>
</section>

<script>
(function(){
const html=document.documentElement,body=document.body;html.classList.add('lock');body.classList.add('lock');
const TASKS=[{
 id:'pelar',q:'Pelar el aislamiento de un cable sin da√±arlo.',
 options:[
  {id:'pelacables',label:'Pelacables ‚úÇÔ∏è',why:'Ajusta el calibre y no corta hilos.'},
  {id:'cutter',label:'C√∫ter',why:'Puede cortar hilos y debilitar el conductor.'},
  {id:'corte',label:'Alicates de corte',why:'Puede morder el cobre y romper hebras.'}
 ],
 answer:'pelacables',
 explain:'El pelacables evita da√±ar el cobre; c√∫ter y alicates pueden cortar hebras.',
 tip:'Ajusta el calibre al AWG real del cable antes de pelar.'
},{
 id:'tension',q:'Comprobar si hay tensi√≥n en un tomacorriente.',
 options:[
  {id:'buscapolos',label:'Buscapolos üîé‚ö°',why:'Prueba r√°pida de presencia de fase.'},
  {id:'multimetro',label:'Mult√≠metro üìü',why:'Sirve, pero requiere rango y puntas.'},
  {id:'dest',label:'Destornillador aislado üî©',why:'No detecta tensi√≥n por s√≠ solo.'}
 ],
 answer:'buscapolos',
 explain:'El buscapolos indica presencia de fase al instante; el destornillador no mide y el mult√≠metro exige m√°s pasos.',
 tip:'Para diagn√≥stico completo usa el mult√≠metro; el buscapolos es solo presencia.'
},{
 id:'voltaje',q:'Medir el voltaje exacto entre fase y neutro.',
 options:[
  {id:'multimetro',label:'Mult√≠metro üìü',why:'Mide V con precisi√≥n y seguridad.'},
  {id:'buscapolos',label:'Buscapolos üîé‚ö°',why:'Solo indica presencia, no el valor.'},
  {id:'alicates',label:'Alicates de punta üëÉ',why:'No son instrumento de medida.'}
 ],
 answer:'multimetro',
 explain:'El mult√≠metro da el valor exacto; buscapolos solo indica presencia y los alicates no miden.',
 tip:'Selecciona rango AC apropiado y coloca puntas en COM y V.'
},{
 id:'apretar',q:'Apretar un tornillo de borne en un tablero.',
 options:[
  {id:'dest',label:'Destornillador aislado üî©',why:'Transfiere par y a√≠sla la mano.'},
  {id:'alicates',label:'Alicates de punta üëÉ',why:'Podr√≠a redondear la cabeza o resbalar.'},
  {id:'buscapolos',label:'Buscapolos üîé‚ö°',why:'No est√° dise√±ado para aplicar par.'}
 ],
 answer:'dest',
 explain:'El destornillador aislado es seguro y preciso; alicates da√±an la cabeza y el buscapolos no aprieta.',
 tip:'Usa la punta correcta (plano/Phillips) para no barrer el tornillo.'
},{
 id:'cortar',q:'Cortar un conductor fino de cobre.',
 options:[
  {id:'corte',label:'Alicates de corte ‚úÇÔ∏è',why:'Cuchillas afiladas para cable.'},
  {id:'pelacables',label:'Pelacables ‚úÇÔ∏è',why:'Para pelar, no para cortar grueso.'},
  {id:'dest',label:'Destornillador aislado üî©',why:'No corta conductor.'}
 ],
 answer:'corte',
 explain:'Los alicates de corte est√°n hechos para seccionar cable; pelacables no es cortador principal y el destornillador no corta.',
 tip:'Corta en √°ngulo recto y aleja los dedos de la zona de corte.'
},{
 id:'doblar',q:'Doblar cable y sujetar una pieza peque√±a.',
 options:[
  {id:'alicates',label:'Alicates de punta üëÉ',why:'Precisi√≥n para doblar y sujetar.'},
  {id:'dest',label:'Destornillador aislado üî©',why:'No sujeta piezas con firmeza.'},
  {id:'buscapolos',label:'Buscapolos üîé‚ö°',why:'No est√° pensado para manipular.'}
 ],
 answer:'alicates',
 explain:'Los alicates de punta permiten precisi√≥n; destornillador y buscapolos no sujetan con control.',
 tip:'Usa la punta estriada para mejorar agarre sin da√±ar el conductor.'
}];

const scene=document.getElementById('scene');
const board=document.getElementById('board');
const taskText=document.getElementById('taskText');
const mentorText=document.getElementById('mentorText');
const stepText=document.getElementById('stepText');
const barFill=document.getElementById('barFill');
const confirmBtn=document.getElementById('confirmBtn');
const feedback=document.getElementById('feedback');
const intro=document.getElementById('intro');
const startBtn=document.getElementById('startBtn');
const results=document.getElementById('results');
const resList=document.getElementById('resList');
const scorePill=document.getElementById('scorePill');
const timePill=document.getElementById('timePill');

let idx=0,selected=null,answers=[],startTime=0;

function clampLabel(t){return t.length>48?t.slice(0,46)+'‚Ä¶':t}
function render(){
 const t=TASKS[idx];
 stepText.textContent=`${idx+1}/${TASKS.length}`;
 barFill.style.width=`${((idx)/TASKS.length)*100}%`;
 taskText.textContent=t.q;
 mentorText.textContent="Elige la herramienta id√≥nea y confirma.";
 board.innerHTML='';
 t.options.forEach(o=>{
  const card=document.createElement('button');
  card.className='card';
  card.setAttribute('type','button');
  card.setAttribute('aria-pressed','false');
  card.setAttribute('aria-label',o.label);
  card.innerHTML=`<div class="icon">‚öôÔ∏è</div><div class="label">${clampLabel(o.label)}</div>`;
  card.onclick=()=>select(o.id,card);
  board.appendChild(card);
 });
 selected=null;confirmBtn.disabled=true;feedback.textContent='';
 ensureFits();
}
function select(id,el){
 selected=id;
 [...board.children].forEach(c=>{c.classList.remove('selected');c.setAttribute('aria-pressed','false')});
 el.classList.add('selected');el.setAttribute('aria-pressed','true');
 confirmBtn.disabled=false;
}
function confirm(){
 const t=TASKS[idx];
 const ok=selected===t.answer;
 const cards=[...board.children];
 const map={};t.options.forEach((o,i)=>map[o.id]=cards[i]);
 cards.forEach(c=>{c.classList.remove('correct','wrong')});
 map[t.answer]?.classList.add('correct');
 if(selected&&selected!==t.answer){map[selected]?.classList.add('wrong')}
 feedback.className='feedback '+(ok?'ok':'bad');
 feedback.textContent=ok?'¬°Correcto!':'Ups, herramienta inadecuada';
 answers.push({task:t.q,chosen:selected,correct:t.answer,explain:t.explain,tip:t.tip,options:t.options});
 setTimeout(()=>{
  idx++;
  if(idx<TASKS.length){scene.classList.add('fade');render();setTimeout(()=>scene.classList.remove('fade'),180)}
  else finish();
 },650);
}
function finish(){
 barFill.style.width='100%';
 const corrects=answers.filter(a=>a.chosen===a.correct).length;
 results.classList.add('open');
 scorePill.textContent=`Aciertos ${corrects}/${TASKS.length}`;
 const ms=Date.now()-startTime;timePill.textContent='Tiempo: '+Math.round(ms/1000)+'s';
 resList.innerHTML='';
 answers.forEach(a=>{
  const me=a.options.find(o=>o.id===a.chosen);
  const sol=a.options.find(o=>o.id===a.correct);
  const item=document.createElement('div');item.className='item';
  item.innerHTML=`<h3>${a.task}</h3>
   <div class="row">
    <span class="badge me">Tu elecci√≥n: ${me?clampLabel(me.label):'‚Äî'}</span>
    <span class="badge ok">Correcta: ${clampLabel(sol.label)}</span>
   </div>
   <div class="exp">${a.explain}</div>
   <div class="tip">Consejo: ${a.tip}</div>`;
  resList.appendChild(item);
 });
 intro.classList.add('hide');scene.classList.add('hide');
 html.classList.remove('lock');body.classList.remove('lock');
 window.scrollTo({top:0,behavior:'smooth'});
}
confirmBtn.addEventListener('click',confirm);
startBtn.addEventListener('click',()=>{intro.style.display='none';startTime=Date.now();render()});

function assertNoOverflow(){const s=scene;if(!s)return true;return s.scrollHeight<=s.clientHeight}
function applyCompactMode(on){scene.classList.toggle('compact',on)}
function fitBoardToViewport(step){
 const root=document.documentElement.style;
 if(step===1){root.setProperty('--cellH','64px')}
 if(step===2){root.setProperty('--cellH','60px')}
 if(step===3){root.setProperty('--cellH','56px')}
}
function autoscaleUI(){
 const s=scene;let scale=1;let tries=0;
 while(!assertNoOverflow()&&scale>0.88&&tries<5){scale-=0.03;tries++}
 document.documentElement.style.setProperty('--ui-scale',String(scale));
}
function ensureFits(){
 applyCompactMode(false);
 document.documentElement.style.setProperty('--cellH','70px');
 document.documentElement.style.setProperty('--ui-scale','1');
 if(assertNoOverflow())return;
 applyCompactMode(true);if(assertNoOverflow())return;
 for(let i=1;i<=3;i++){fitBoardToViewport(i);if(assertNoOverflow())return}
 autoscaleUI();
}
window.addEventListener('resize',ensureFits,{passive:true});
window.addEventListener('orientationchange',ensureFits);

render();
})();
function completeTask(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));}}
</script></body></html>