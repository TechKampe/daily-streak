
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<title>Inspector de Riesgos: ¬°Tu Primera Obra! üë∑</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;font-family:'Baloo 2',sans-serif;background:#FFF;color:#1A1B2F;overflow:hidden;overscroll-behavior:none;-webkit-font-smoothing:antialiased}
body{position:relative}
.scene{width:100%;position:relative;display:flex;flex-direction:column;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);overflow:hidden}
@supports(height:100svh){.scene{height:100svh}}
@supports not(height:100svh){.scene{height:100dvh}}
@supports not(height:100dvh){.scene{height:100vh}}
.avatar{position:absolute;top:20px;left:20px;width:80px;height:80px;border-radius:50%;background:url('https://techkampe.github.io/daily-streak/assets/Avatar%203_low.png') center/cover;opacity:0.15;z-index:0;pointer-events:none}
.modal{position:fixed;inset:0;background:rgba(11,33,74,0.85);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:fadeIn 0.3s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal-content{background:#FFF;border-radius:24px;padding:clamp(20px,5vw,32px);max-width:500px;width:100%;max-height:90svh;overflow-y:auto;border:1px solid #00E6BC;box-shadow:0 12px 32px rgba(0,230,188,0.2);animation:slideUp 0.4s ease}
@keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}
.modal-content h2{font-size:clamp(1.3rem,5vw,1.8rem);font-weight:700;color:#0B214A;margin-bottom:12px;line-height:1.2}
.modal-content p{font-size:clamp(0.95rem,3.5vw,1.05rem);color:#1A1B2F;line-height:1.5;margin-bottom:20px}
.btn{display:block;width:100%;padding:16px 24px;background:#0B214A;color:#00E6BC;border:none;border-radius:24px;font-family:'Baloo 2',sans-serif;font-size:clamp(1rem,4vw,1.15rem);font-weight:700;cursor:pointer;box-shadow:0 8px 18px rgba(11,33,74,0.25);transition:all 0.3s ease;touch-action:manipulation;min-height:44px}
.btn:active{transform:scale(0.97);box-shadow:0 4px 10px rgba(11,33,74,0.2)}
.btn:disabled{opacity:0.4;cursor:not-allowed;box-shadow:none}
.game-container{flex:1;display:flex;flex-direction:column;justify-content:space-between;padding:20px 16px 16px;position:relative;z-index:1;overflow:hidden}
.compact .game-container{padding:12px 12px 12px}
.progress-bar{display:flex;justify-content:center;align-items:center;margin-bottom:16px}
.compact .progress-bar{margin-bottom:10px}
.progress-text{font-size:clamp(0.85rem,3vw,1rem);font-weight:600;color:#00E6BC;background:#C5FFDF;padding:6px 16px;border-radius:12px}
.compact .progress-text{font-size:0.8rem;padding:4px 12px}
.item-display{background:#FFF;border:1px solid #00E6BC;border-radius:24px;padding:clamp(20px,5vw,32px);text-align:center;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,230,188,0.1);min-height:120px;display:flex;align-items:center;justify-content:center}
.compact .item-display{padding:16px;min-height:90px;margin-bottom:12px}
.item-text{font-size:clamp(1.1rem,4.5vw,1.4rem);font-weight:600;color:#1A1B2F;line-height:1.3;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.compact .item-text{font-size:1rem;-webkit-line-clamp:2}
.categories{display:flex;flex-direction:column;gap:12px}
.compact .categories{gap:8px}
.category-btn{padding:16px 20px;background:#FFF;color:#0B214A;border:2px solid #0B214A;border-radius:20px;font-family:'Baloo 2',sans-serif;font-size:clamp(0.95rem,3.8vw,1.1rem);font-weight:600;cursor:pointer;transition:all 0.3s ease;touch-action:manipulation;min-height:44px;position:relative;overflow:hidden}
.compact .category-btn{padding:12px 16px;font-size:0.9rem}
.category-btn:active{transform:scale(0.98)}
.category-btn.selected{background:#0B214A;color:#00E6BC;border-color:#00E6BC;box-shadow:0 6px 16px rgba(11,33,74,0.3);animation:dropIn 0.4s ease}
@keyframes dropIn{0%{transform:scale(1.1)}50%{transform:scale(0.95)}100%{transform:scale(1)}}
.results-container{width:100%;height:100%;overflow-y:auto;padding:20px 16px 32px;background:#FFF}
.results-header{text-align:center;margin-bottom:24px}
.results-header h2{font-size:clamp(1.4rem,5vw,1.9rem);font-weight:700;color:#0B214A;margin-bottom:12px}
.score-display{display:inline-block;background:#C5FFDF;color:#00E6BC;padding:12px 24px;border-radius:16px;font-size:clamp(1.1rem,4vw,1.3rem);font-weight:700;margin-bottom:16px}
.results-list{margin-bottom:24px}
.result-item{background:#FFF;border:1px solid #00E6BC;border-radius:16px;padding:16px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,230,188,0.1)}
.result-item.correct{border-color:#04FFB4}
.result-item.incorrect{border-color:#F9577E}
.result-question{font-size:clamp(0.95rem,3.5vw,1.05rem);font-weight:600;color:#1A1B2F;margin-bottom:8px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.result-answer{font-size:clamp(0.85rem,3vw,0.95rem);color:#0B214A;margin-bottom:6px}
.result-answer .label{font-weight:600}
.result-answer.correct .label{color:#04FFB4}
.result-answer.incorrect .label{color:#F9577E}
.result-explanation{font-size:clamp(0.8rem,3vw,0.9rem);color:#1A1B2F;line-height:1.4;opacity:0.8;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.final-tip{background:#C5FFDF;border-radius:16px;padding:20px;margin-bottom:24px;border:1px solid #00E6BC}
.final-tip h3{font-size:clamp(1rem,4vw,1.2rem);font-weight:700;color:#0B214A;margin-bottom:8px}
.final-tip p{font-size:clamp(0.9rem,3.5vw,1rem);color:#1A1B2F;line-height:1.5}
.hidden{display:none!important}
</style>
</head>
<body>
<div class="avatar"></div>
<div id="introModal" class="modal">
<div class="modal-content">
<h2>Inspector de Riesgos: ¬°Tu Primera Obra! üë∑</h2>
<p>Est√°s en tu primer d√≠a en una obra. Tu mentor te pide que identifiques r√°pidamente diversas situaciones para evaluar tu ojo cr√≠tico para la seguridad laboral.</p>
<p><strong>C√≥mo jugar:</strong> Para cada situaci√≥n, as√≠gnala a una de las tres categor√≠as: Peligro Inmediato, Potencial Desorden o Buena Pr√°ctica.</p>
<button class="btn" onclick="startGame()">¬°Empezar!</button>
</div>
</div>
<div id="gameScene" class="scene hidden">
<div class="game-container">
<div class="progress-bar">
<div class="progress-text"><span id="currentItem">1</span>/10</div>
</div>
<div class="item-display">
<div class="item-text" id="itemText"></div>
</div>
<div class="categories">
<button class="category-btn" onclick="selectCategory(0)">üö® Peligro Inmediato</button>
<button class="category-btn" onclick="selectCategory(1)">‚ö†Ô∏è Potencial Desorden</button>
<button class="category-btn" onclick="selectCategory(2)">‚úÖ Buena Pr√°ctica</button>
</div>
</div>
</div>
<div id="resultsScene" class="scene hidden">
<div class="results-container">
<div class="results-header">
<h2>üéØ Resultados</h2>
<div class="score-display"><span id="finalScore">0</span>/10 correctos</div>
</div>
<div class="results-list" id="resultsList"></div>
<div class="final-tip">
<h3>üí° Consejo clave</h3>
<p>En obra, entrena tu ojo para detectar riesgos en tres niveles: peligros que requieren acci√≥n inmediata, desorden que puede generar accidentes y buenas pr√°cticas a reforzar. Observa siempre tu entorno.</p>
</div>
<button class="btn" onclick="completeTask()">Ver mi recompensa</button>
</div>
</div>
<script>
const items=[
{text:"Charco de agua cerca de un enchufe",correct:0,explanation:"Agua + electricidad = riesgo grave de electrocuci√≥n. Requiere acci√≥n inmediata."},
{text:"Zona de trabajo se√±alizada con conos",correct:2,explanation:"Se√±alizar zonas es una buena pr√°ctica de prevenci√≥n de riesgos laborales."},
{text:"Herramientas abandonadas en el suelo",correct:1,explanation:"Aumenta el riesgo de tropiezos. Debe corregirse pero no es peligro inmediato."},
{text:"Escalera apoyada de forma inestable",correct:0,explanation:"Alto riesgo de ca√≠da. Debe corregirse de inmediato antes de usar."},
{text:"Extintor accesible y se√±alizado",correct:2,explanation:"Fundamental para emergencias. Ejemplo de buena pr√°ctica preventiva."},
{text:"Cables el√©ctricos sueltos por el paso",correct:1,explanation:"Riesgo de tropiezo y da√±o. Debe recogerse, aunque no es emergencia."},
{text:"Trabajador sin casco en zona activa",correct:0,explanation:"El casco es obligatorio. Exposici√≥n directa a riesgo de golpes graves."},
{text:"Botiqu√≠n de primeros auxilios visible",correct:2,explanation:"Elemento clave de seguridad. Buena pr√°ctica tenerlo accesible y visible."},
{text:"Material apilado sin orden ni fijaci√≥n",correct:1,explanation:"Puede caerse y causar da√±o. Debe ordenarse, pero no es peligro cr√≠tico."},
{text:"Andamio montado con barandillas",correct:2,explanation:"Protecci√≥n contra ca√≠das. Cumple normativa de seguridad en altura."}
];
const categories=["üö® Peligro Inmediato","‚ö†Ô∏è Potencial Desorden","‚úÖ Buena Pr√°ctica"];
let currentIndex=0;
let userAnswers=[];
let score=0;
function startGame(){
document.getElementById('introModal').classList.add('hidden');
document.getElementById('gameScene').classList.remove('hidden');
showItem();
setTimeout(ensureFits,100);
}
function showItem(){
if(currentIndex>=items.length){
showResults();
return;
}
document.getElementById('currentItem').textContent=currentIndex+1;
document.getElementById('itemText').textContent=items[currentIndex].text;
document.querySelectorAll('.category-btn').forEach(btn=>{
btn.classList.remove('selected');
btn.disabled=false;
});
}
function selectCategory(category){
const btns=document.querySelectorAll('.category-btn');
btns.forEach(btn=>btn.disabled=true);
btns[category].classList.add('selected');
const isCorrect=category===items[currentIndex].correct;
if(isCorrect)score++;
userAnswers.push({
item:items[currentIndex],
userAnswer:category,
correct:isCorrect
});
setTimeout(()=>{
currentIndex++;
showItem();
},600);
}
function showResults(){
document.getElementById('gameScene').classList.add('hidden');
document.getElementById('resultsScene').classList.remove('hidden');
document.querySelector('html').style.overflow='auto';
document.querySelector('body').style.overflow='auto';
document.getElementById('finalScore').textContent=score;
const resultsList=document.getElementById('resultsList');
resultsList.innerHTML='';
userAnswers.forEach(answer=>{
const div=document.createElement('div');
div.className='result-item '+(answer.correct?'correct':'incorrect');
div.innerHTML=`
<div class="result-question">${answer.item.text}</div>
<div class="result-answer ${answer.correct?'correct':'incorrect'}">
<span class="label">${answer.correct?'‚úì':'‚úó'}</span> Tu respuesta: ${categories[answer.userAnswer]}
</div>
${!answer.correct?`<div class="result-answer correct"><span class="label">‚úì</span> Correcta: ${categories[answer.item.correct]}</div>`:''}
<div class="result-explanation">${answer.item.explanation}</div>
`;
resultsList.appendChild(div);
});
}
function completeTask(){
if(window.ReactNativeWebView){
window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));
}
}
function ensureFits(){
const scene=document.querySelector('.scene:not(.hidden)');
if(!scene)return;
const container=scene.querySelector('.game-container');
if(!container)return;
if(container.scrollHeight>container.clientHeight){
scene.classList.add('compact');
setTimeout(()=>{
if(container.scrollHeight>container.clientHeight){
const scale=Math.max(0.88,container.clientHeight/container.scrollHeight);
container.style.transform=`scale(${scale})`;
container.style.transformOrigin='top center';
}
},50);
}
}
window.addEventListener('resize',ensureFits);
window.addEventListener('orientationchange',()=>setTimeout(ensureFits,200));
</script>
</body>
</html>

