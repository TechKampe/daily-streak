
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">
<meta name="theme-color" content="#FFFFFF">
<title>¬°No te chispotees! ‚ö°Ô∏è - K√§mpe</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{width:100%;overflow:hidden;overscroll-behavior:none;font-family:'Baloo 2',cursive;background:#FFFFFF;color:#1A1B2F;touch-action:pan-y}
body.results-view{overflow-y:auto}
@supports(height:100svh){.scene{height:100svh}}
@supports not(height:100svh){.scene{height:100dvh}}
@supports not(height:100dvh){.scene{height:100vh}}
.scene{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between;position:relative;padding:max(env(safe-area-inset-top),80px) max(env(safe-area-inset-right),16px) max(env(safe-area-inset-bottom),16px) max(env(safe-area-inset-left),16px);overflow:hidden}
.avatar-bg{position:absolute;bottom:-20px;right:-20px;width:200px;height:200px;background:url('https://techkampe.github.io/daily-streak/assets/Avatar%203_low.png') no-repeat center/contain;opacity:0.15;pointer-events:none;z-index:0}
.content-wrapper{width:100%;max-width:480px;display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;position:relative;z-index:1;gap:clamp(12px,3vh,20px)}
.modal{background:#FFFFFF;border-radius:24px;padding:clamp(20px,4vh,32px) clamp(16px,4vw,24px);box-shadow:0 8px 32px rgba(11,33,74,0.15);border:1px solid #00E6BC;width:100%;max-width:420px;max-height:90svh;overflow-y:auto;display:flex;flex-direction:column;gap:clamp(12px,2.5vh,20px)}
.modal h1{font-size:clamp(1.5rem,5vw,2rem);font-weight:800;color:#1A1B2F;line-height:1.2;text-align:center}
.modal p{font-size:clamp(0.9rem,3.5vw,1rem);font-weight:400;color:#1A1B2F;line-height:1.5;text-align:center}
.btn-primary{background:#0B214A;color:#00E6BC;border:none;border-radius:24px;padding:clamp(14px,3vh,18px) clamp(20px,5vw,32px);font-size:clamp(1rem,4vw,1.1rem);font-weight:700;font-family:'Baloo 2',cursive;cursor:pointer;box-shadow:0 8px 18px rgba(11,33,74,0.25);transition:transform 0.2s,box-shadow 0.2s;min-height:44px;touch-action:manipulation;width:100%;max-width:300px}
.btn-primary:hover,.btn-primary:focus{transform:translateY(-2px);box-shadow:0 12px 24px rgba(11,33,74,0.35);outline:2px solid #00E6BC;outline-offset:2px}
.btn-primary:active{transform:translateY(0)}
.btn-primary:disabled{opacity:0.4;cursor:not-allowed;box-shadow:none}
.progress-bar{width:100%;display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:clamp(8px,2vh,16px)}
.progress-text{font-size:clamp(0.85rem,3vw,0.95rem);font-weight:700;color:#00E6BC;white-space:nowrap}
.progress-track{flex:1;height:8px;background:rgba(0,230,188,0.2);border-radius:8px;overflow:hidden}
.progress-fill{height:100%;background:#00E6BC;border-radius:8px;transition:width 0.4s ease}
.question-card{width:100%;display:flex;flex-direction:column;gap:clamp(12px,2.5vh,20px);animation:slideIn 0.4s ease}
@keyframes slideIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}
.question-text{font-size:clamp(1.05rem,4vw,1.25rem);font-weight:700;color:#1A1B2F;line-height:1.4;text-align:center;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden}
.options{display:flex;flex-direction:column;gap:clamp(10px,2vh,14px);width:100%}
.option-btn{background:#FFFFFF;color:#1A1B2F;border:2px solid #0B214A;border-radius:20px;padding:clamp(12px,2.5vh,16px) clamp(14px,3vw,20px);font-size:clamp(0.9rem,3.5vw,1rem);font-weight:600;font-family:'Baloo 2',cursive;cursor:pointer;transition:all 0.2s;min-height:44px;text-align:left;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;line-height:1.3;touch-action:manipulation}
.option-btn:hover,.option-btn:focus{background:#C5FFDF;border-color:#00E6BC;outline:none;transform:translateX(4px)}
.option-btn:active{transform:scale(0.98)}
.option-btn.correct{background:#C5FFDF;border-color:#04FFB4;color:#1A1B2F;pointer-events:none}
.option-btn.wrong{background:rgba(249,87,126,0.15);border-color:#F9577E;color:#1A1B2F;pointer-events:none}
.results-container{width:100%;max-width:480px;padding:clamp(16px,3vh,24px);display:flex;flex-direction:column;gap:clamp(16px,3vh,24px)}
.results-header{text-align:center;padding-bottom:clamp(12px,2vh,20px);border-bottom:2px solid #C5FFDF}
.results-header h2{font-size:clamp(1.4rem,5vw,1.8rem);font-weight:800;color:#1A1B2F;margin-bottom:8px}
.score-badge{display:inline-block;background:#C5FFDF;color:#00E6BC;padding:8px 20px;border-radius:20px;font-size:clamp(1rem,4vw,1.2rem);font-weight:700;margin-top:8px}
.question-review{background:#FFFFFF;border:1px solid #C5FFDF;border-radius:16px;padding:clamp(14px,2.5vh,18px);display:flex;flex-direction:column;gap:10px}
.question-review-title{font-size:clamp(0.95rem,3.5vw,1.05rem);font-weight:700;color:#1A1B2F;line-height:1.3}
.answer-row{display:flex;flex-direction:column;gap:6px;font-size:clamp(0.85rem,3vw,0.95rem)}
.answer-label{font-weight:600;color:#1A1B2F}
.answer-value{padding-left:8px;line-height:1.4}
.answer-value.correct-ans{color:#04FFB4}
.answer-value.wrong-ans{color:#F9577E}
.explanation{background:#C5FFDF;padding:10px 12px;border-radius:10px;font-size:clamp(0.85rem,3vw,0.92rem);color:#1A1B2F;line-height:1.4;margin-top:4px}
.advice-box{background:#C5FFDF;padding:clamp(14px,2.5vh,18px);border-radius:16px;text-align:center;font-size:clamp(0.9rem,3.5vw,1rem);font-weight:600;color:#1A1B2F;line-height:1.5}
.compact .question-text{font-size:clamp(0.95rem,3.5vw,1.1rem);-webkit-line-clamp:3}
.compact .option-btn{padding:clamp(10px,2vh,12px) clamp(12px,2.5vw,16px);font-size:clamp(0.85rem,3vw,0.95rem)}
.compact .progress-bar{margin-bottom:clamp(6px,1.5vh,10px)}
.hidden{display:none!important}
</style>
</head>
<body>
<div class="scene" id="app">
<div class="avatar-bg"></div>
<div class="content-wrapper" id="contentWrapper">
<div class="modal" id="introModal">
<h1>¬°No te chispotees! ‚ö°Ô∏è</h1>
<p>Eres un aprendiz de electricista en tu primer d√≠a. Tu responsable quiere asegurar que conoces los b√°sicos de seguridad antes de tocar un cable. Responde 5 preguntas sobre PRL en trabajos el√©ctricos.</p>
<button class="btn-primary" onclick="startQuiz()" aria-label="Comenzar el reto">Comenzar</button>
</div>
</div>
</div>
<script>
const questions=[
{q:"Antes de trabajar en un cuadro el√©ctrico, ¬øcu√°l es el primer paso de las 5 Reglas de Oro?",options:["Desconectar todas las fuentes de tensi√≥n","Usar guantes aislantes","Se√±alizar la zona de trabajo"],correct:0,exp:"Desconectar es el primer paso para evitar contactos el√©ctricos."},
{q:"¬øQu√© EPI es obligatorio al manipular cables en tensi√≥n?",options:["Casco y chaleco reflectante","Guantes aislantes y calzado diel√©ctrico","Gafas de sol y rodilleras"],correct:1,exp:"Los guantes aislantes y calzado diel√©ctrico protegen contra descargas el√©ctricas."},
{q:"Encuentras un cable pelado en el suelo. ¬øQu√© haces?",options:["Lo muevo con las manos","Se√±alizo y aviso al responsable","Lo cubro con cinta adhesiva com√∫n"],correct:1,exp:"Se√±alizar y avisar evita accidentes; nunca toques cables sospechosos."},
{q:"¬øQu√© se√±al indica riesgo el√©ctrico en una zona de trabajo?",options:["Tri√°ngulo amarillo con rayo negro","C√≠rculo rojo con l√≠nea diagonal","Cuadrado azul con bombilla"],correct:0,exp:"El tri√°ngulo amarillo con rayo es la se√±al est√°ndar de riesgo el√©ctrico."},
{q:"Antes de dar tensi√≥n tras reparar, ¬øqu√© debes verificar?",options:["Que todas las herramientas est√©n guardadas","Que nadie est√© trabajando en el circuito","Ambas anteriores"],correct:2,exp:"Verificar herramientas guardadas y ausencia de personas previene accidentes graves."}
];
let currentQ=0,userAnswers=[],startTime;
function startQuiz(){
document.getElementById('introModal').classList.add('hidden');
startTime=Date.now();
showQuestion();
}
function showQuestion(){
const cw=document.getElementById('contentWrapper');
cw.innerHTML=`
<div class="progress-bar">
<span class="progress-text">${currentQ+1}/${questions.length}</span>
<div class="progress-track"><div class="progress-fill" style="width:${((currentQ+1)/questions.length)*100}%"></div></div>
</div>
<div class="question-card">
<p class="question-text">${questions[currentQ].q}</p>
<div class="options">
${questions[currentQ].options.map((opt,i)=>`<button class="option-btn" onclick="selectAnswer(${i})" aria-label="Opci√≥n ${i+1}: ${opt}">${opt}</button>`).join('')}
</div>
</div>
`;
ensureFits();
}
function selectAnswer(index){
userAnswers.push(index);
const btns=document.querySelectorAll('.option-btn');
const correct=questions[currentQ].correct;
btns[index].classList.add(index===correct?'correct':'wrong');
if(index!==correct){
btns[correct].classList.add('correct');
}
setTimeout(()=>{
currentQ++;
if(currentQ<questions.length){
showQuestion();
}else{
showResults();
}
},800);
}
function showResults(){
document.body.classList.add('results-view');
const score=userAnswers.filter((a,i)=>a===questions[i].correct).length;
const app=document.getElementById('app');
app.style.height='auto';
app.style.overflow='visible';
const cw=document.getElementById('contentWrapper');
cw.style.justifyContent='flex-start';
cw.innerHTML=`
<div class="results-container">
<div class="results-header">
<h2>Resultado Final</h2>
<div class="score-badge">${score}/${questions.length} correctas</div>
</div>
${questions.map((q,i)=>{
const userAns=userAnswers[i];
const isCorrect=userAns===q.correct;
return`
<div class="question-review">
<div class="question-review-title">${i+1}. ${q.q}</div>
<div class="answer-row">
<span class="answer-label">Tu respuesta:</span>
<span class="answer-value ${isCorrect?'correct-ans':'wrong-ans'}">${q.options[userAns]}</span>
</div>
${!isCorrect?`<div class="answer-row"><span class="answer-label">Respuesta correcta:</span><span class="answer-value correct-ans">${q.options[q.correct]}</span></div>`:''}
<div class="explanation">${q.exp}</div>
</div>
`;}).join('')}
<div class="advice-box">
üí° Recuerda: la seguridad el√©ctrica salva vidas. Nunca improvises, sigue siempre los protocolos.
</div>
<button class="btn-primary" onclick="completeTask()" aria-label="Ver mi recompensa">Ver mi recompensa</button>
</div>
`;
}
function completeTask(){
if(window.ReactNativeWebView){
window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));
}
}
function ensureFits(){
const scene=document.querySelector('.scene');
const cw=document.getElementById('contentWrapper');
if(!scene||!cw)return;
setTimeout(()=>{
if(scene.scrollHeight>scene.clientHeight+5){
cw.classList.add('compact');
setTimeout(()=>{
if(scene.scrollHeight>scene.clientHeight+5){
const scale=Math.max(0.88,scene.clientHeight/scene.scrollHeight);
cw.style.transform=`scale(${scale})`;
cw.style.transformOrigin='top center';
}
},50);
}
},100);
}
window.addEventListener('resize',ensureFits);
window.addEventListener('orientationchange',ensureFits);
</script>
</body>
</html>

