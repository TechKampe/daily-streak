<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><title>¡No te electrocutes! ⚡️</title><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet"><style>
:root{--bg:#FFF;--text:#1A1B2F;--cta:#0B214A;--accent:#00E6BC;--success:#04FFB4;--error:#F9577E;--ui-scale:1;--hudH:72px;--gap:16px}
*{box-sizing:border-box}
html,body{height:100%;background:#FFF;color:var(--text);font-family:'Baloo 2',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
html,body{overflow:hidden;overscroll-behavior:none}
html.summary-open,body.summary-open{overflow-y:auto}
body{margin:0}
button{font-family:inherit}
.scene{position:relative;width:100%;touch-action:none;display:flex;align-items:stretch;justify-content:center;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}
@supports(height:100svh){.scene{height:100svh}}
@supports not (height:100svh){.scene{height:100dvh}}
@supports not (height:100dvh){.scene{height:100vh}}
.scene-inner{position:relative;transform:scale(var(--ui-scale));transform-origin:50% 0;flex:1;max-width:720px;padding:12px 18px}
.avatar{position:absolute;right:8px;top:8px;width:120px;height:auto;opacity:.08;pointer-events:none;filter:contrast(1.1)}
.hud{min-height:var(--hudH);display:flex;align-items:flex-end;padding-right:110px;margin-top:64px}
.title{margin:0;font-weight:700;letter-spacing:.2px;font-size:clamp(1.05rem,4.8vw,1.6rem);color:var(--text)}
.progress{display:flex;align-items:center;gap:10px;margin-top:8px}
.pLabel{font-size:.95rem;color:var(--accent);min-width:44px;text-align:center}
.pBar{flex:1;height:8px;border-radius:8px;outline:1px solid var(--accent);position:relative}
.pFill{position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg,var(--accent),#04FFB4);border-radius:8px;transition:width .3s ease}
.game{display:grid;grid-template-rows:auto 1fr auto;gap:18px;height:calc(100% - var(--hudH) - 24px)}
.statement{font-weight:600;font-size:clamp(1.05rem,4.6vw,1.35rem);line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-top:4px}
.card{border:1px solid var(--accent);border-radius:14px;padding:14px;background:#FFF}
.actions{position:sticky;bottom:0;display:grid;gap:12px}
.btn{height:56px;border-radius:24px;border:none;background:var(--cta);color:var(--accent);font-weight:700;letter-spacing:.3px;font-size:clamp(1rem,3.8vw,1.1rem);box-shadow:0 8px 18px rgba(11,33,74,.25);display:flex;align-items:center;justify-content:center;cursor:pointer}
.btn:disabled{opacity:.45;box-shadow:none}
.btn:focus-visible{outline:3px solid var(--accent);outline-offset:2px}
.toast{position:absolute;left:50%;bottom:110px;transform:translateX(-50%);padding:8px 12px;background:#C5FFDF;color:#0B214A;border-radius:12px;font-size:.95rem;opacity:0;pointer-events:none;transition:opacity .18s ease}
.toast.show{opacity:1}
.mini{font-size:.9rem;color:#0B214A;background:#C5FFDF;border-radius:10px;padding:6px 10px;display:inline-block}
.ctas{display:flex;gap:12px}
.choice:active{transform:translateY(1px)}
.choice.pulse{box-shadow:0 0 0 2px rgba(0,230,188,.5),0 8px 18px rgba(11,33,74,.25)}
.choice{position:relative;overflow:hidden}
.choice::after{content:"";position:absolute;inset:0;border-radius:24px;opacity:0}
.choice.flash::after{background:radial-gradient(200px 200px at var(--x) var(--y),rgba(0,230,188,.18),transparent 60%);opacity:1;animation:fade .45s ease}
@keyframes fade{to{opacity:0}}
.modal{position:fixed;inset:0;background:rgba(26,27,47,.08);display:flex;align-items:center;justify-content:center;padding:16px;z-index:5}
.modal-inner{max-height:90svh;max-width:680px;overflow:auto;background:#FFF;border:1px solid var(--accent);border-radius:16px;padding:18px 16px 16px}
.modal h2{margin:8px 0 6px;font-size:clamp(1.2rem,5vw,1.7rem)}
.modal p{margin:6px 0 10px;font-size:1rem}
.modal .tip{margin:8px 0 14px}
.start{width:100%}
.summary{position:relative;display:none;padding:16px 18px 100px;max-width:820px;margin:0 auto}
.summary.visible{display:block}
.summary h2{margin:14px 0 2px;font-size:clamp(1.15rem,5vw,1.6rem)}
.score{font-weight:700;color:var(--accent);margin-bottom:10px}
.list{display:grid;gap:12px}
.item{border:1px solid var(--accent);border-radius:14px;padding:12px;background:#FFF}
.item h3{margin:0 0 6px;font-size:1rem;line-height:1.15;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.tags{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:6px}
.tag{font-size:.9rem;border-radius:10px;padding:4px 8px}
.tag.me{background:#C5FFDF;color:#0B214A}
.tag.ok{background:rgba(4,255,180,.15);color:#0B214A;border:1px solid #04FFB4}
.tag.err{background:rgba(249,87,126,.12);color:#0B214A;border:1px solid #F9577E}
.explain{margin:4px 0 0;font-size:.98rem;color:#1A1B2F}
.final-tip{margin:14px 0;border:1px dashed var(--accent);border-radius:12px;padding:12px;background:#F8FFFC}
.reward{position:sticky;bottom:12px;z-index:2}
.hidden{display:none}
.compact .hud{margin-top:56px}
.compact .title{font-size:clamp(1rem,4.1vw,1.35rem)}
.compact .statement{font-size:clamp(.98rem,4.1vw,1.2rem)}
.compact .btn{height:52px}
.safeTop{height:80px;width:100%;position:absolute;left:0;top:0}
</style></head><body class="locked"><div class="safeTop" aria-hidden="true"></div><div id="app">
<div class="scene" id="scene">
<img class="avatar" src="https://techkampe.github.io/daily-streak/assets/Avatar 3_low.png" alt="Avatar mentor" loading="eager">
<div class="scene-inner">
<header class="hud" aria-label="Encabezado del reto">
<div>
<h1 class="title">¡No te electrocutes! ⚡️</h1>
<div class="progress" aria-live="polite"><div class="pLabel" id="pLabel">1/8</div><div class="pBar"><div class="pFill" id="pFill" style="width:0%"></div></div></div>
</div>
</header>
<main class="game" aria-live="polite" aria-atomic="true">
<div class="statement" id="statement">...</div>
<div class="card mini" id="hint" aria-hidden="true">Responde y pasamos al siguiente.</div>
<div class="actions">
<button id="trueBtn" class="btn choice" aria-label="Responder Verdadero">Verdadero</button>
<button id="falseBtn" class="btn choice" aria-label="Responder Falso">Falso</button>
</div>
</main>
<div class="toast" id="toast">¡Anotado!</div>
</div>
</div>
<div class="modal" id="intro" role="dialog" aria-modal="true" aria-labelledby="introTitle">
<div class="modal-inner">
<h2 id="introTitle">¡No te electrocutes! ⚡️</h2>
<p id="introDesc">Eres aprendiz electricista. Antes de abrir un cuadro, tu mentor te evalúa en PRL de baja tensión: EPIs, 5 Reglas de Oro, señalización y herramientas.</p>
<p class="tip">Cómo jugar: toca Verdadero o Falso. Se registra al instante y pasas al siguiente. Al final verás qué era correcto y por qué.</p>
<button id="startBtn" class="btn start" aria-label="Empezar el reto">Empezar</button>
</div>
</div>
<section id="summary" class="summary" aria-live="polite" aria-atomic="true">
<h2>Resultados</h2>
<div class="score" id="score"></div>
<div class="list" id="list"></div>
<div class="final-tip"><strong>Consejo práctico:</strong> antes de tocar, piensa: cortar, bloquear, verificar ausencia de tensión, señalizar y proteger. Si dudas, no toques.</div>
<div class="reward"><button class="btn" onclick="completeTask()">Ver mi recompensa</button></div>
</section>
</div><script>
const data=[{t:"Trabaja en baja tensión sin EPI si es rápido.",a:false,e:"Nunca trabajes sin EPI. Guantes aislantes y casco reducen el riesgo de arco y contacto. El tiempo nunca justifica el peligro."},{t:"Bloquear y señalizar antes de abrir el cuadro.",a:true,e:"Es parte de las 5 Reglas de Oro: cortar, bloquear, verificar ausencia de tensión y señalizar para evitar reenergización."},{t:"Comprobar ausencia de tensión con buscapolos.",a:false,e:"El buscapolos no es fiable. Usa un comprobador homologado de dos polos con autoprueba para verificar ausencia de tensión."},{t:"Herramientas aisladas 1000 V si hay riesgo.",a:true,e:"Emplea herramientas aisladas IEC 60900 cerca de partes activas o posibles tensiones inducidas."},{t:"Joyas y relojes están permitidos bajo guantes.",a:false,e:"Anillos y relojes pueden engancharse o conducir electricidad. Retíralos siempre antes de empezar."},{t:"Humedad no aumenta el riesgo eléctrico.",a:false,e:"La humedad baja la resistencia del cuerpo y del entorno, elevando la corriente de paso. Aísla y seca la zona antes de actuar."},{t:"Verifica EPI y herramientas antes de usarlos.",a:true,e:"Revisa estado, fechas de ensayo y daños. Un EPI o herramienta deteriorada puede fallar cuando más lo necesitas."},{t:"Avisar al cliente si cortas suministro antes.",a:true,e:"La comunicación evita incidentes y reenergizaciones. Señaliza y coordina el corte con todos los implicados."}];
const total=data.length;let step=0,answers=[];const docEl=document.documentElement,body=document.body;
const statementEl=document.getElementById("statement"),pLabel=document.getElementById("pLabel"),pFill=document.getElementById("pFill"),toast=document.getElementById("toast"),hint=document.getElementById("hint");
const btnT=document.getElementById("trueBtn"),btnF=document.getElementById("falseBtn");
const intro=document.getElementById("intro"),scene=document.getElementById("scene"),summary=document.getElementById("summary"),scoreEl=document.getElementById("score"),listEl=document.getElementById("list");
function clampText(s,max){if(!s)return s;return s.length>max?s.slice(0,max-1)+"…":s}
function render(){const item=data[step];statementEl.textContent=clampText(item.t,48);pLabel.textContent=`${step+1}/${total}`;pFill.style.width=`${(step)/total*100}%`;hint.hidden=false;ensureFits()}
function next(){step++;if(step<total){render()}else{pFill.style.width="100%";setTimeout(showSummary,500)}}
function flash(btn,e){const r=btn.getBoundingClientRect();btn.style.setProperty("--x",(e?.clientX||r.width/2)+"px");btn.style.setProperty("--y",(e?.clientY||r.height/2)+"px");btn.classList.add("flash","pulse");setTimeout(()=>btn.classList.remove("flash","pulse"),380)}
function choose(val,ev){answers[step]=val;hint.hidden=true;toast.classList.add("show");setTimeout(()=>toast.classList.remove("show"),400);flash(val?btnT:btnF,ev);btnT.disabled=true;btnF.disabled=true;setTimeout(()=>{btnT.disabled=false;btnF.disabled=false;next()},560)}
btnT.addEventListener("click",e=>choose(true,e));btnF.addEventListener("click",e=>choose(false,e));
document.getElementById("startBtn").addEventListener("click",()=>{intro.style.display="none";render();ensureFits()});
function showSummary(){scene.style.display="none";summary.classList.add("visible");body.classList.remove("locked");body.classList.add("summary-open");docEl.classList.add("summary-open");let correct=0;listEl.innerHTML="";data.forEach((q,i)=>{const ok=answers[i]===q.a;correct+=ok?1:0;const item=document.createElement("div");item.className="item";const h=document.createElement("h3");h.textContent=clampText(q.t,80);const tags=document.createElement("div");tags.className="tags";const me=document.createElement("span");me.className="tag me";me.textContent=`Tú: ${answers[i]?"Verdadero":"Falso"}`;const right=document.createElement("span");right.className="tag "+(ok?"ok":"err");right.textContent=`Correcta: ${q.a?"Verdadero":"Falso"}`;tags.appendChild(me);tags.appendChild(right);const ex=document.createElement("p");ex.className="explain";ex.textContent=clampText(q.e,180);item.appendChild(h);item.appendChild(tags);item.appendChild(ex);listEl.appendChild(item)});scoreEl.textContent=`Aciertos: ${correct}/${total}`;window.scrollTo(0,0)}
function assertNoOverflow(){const sc=scene.querySelector(".scene-inner");return sc.scrollHeight<=scene.clientHeight}
function applyCompactMode(){body.classList.add("compact")}
function fitBoardToViewport(){document.documentElement.style.setProperty("--hudH","64px")}
function autoscaleUI(){const sc=scene.querySelector(".scene-inner");let scale=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--ui-scale"))||1;while(sc.scrollHeight>scene.clientHeight&&scale>0.88){scale-=0.02;document.documentElement.style.setProperty("--ui-scale",scale.toFixed(2))}
}
function ensureFits(){if(assertNoOverflow())return;applyCompactMode();if(assertNoOverflow())return;fitBoardToViewport();if(assertNoOverflow())return;autoscaleUI()}
window.addEventListener("resize",ensureFits);window.addEventListener("orientationchange",ensureFits);
function completeTask(){if(window.ReactNativeWebView){window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}))}}
</script></body></html>