
<!DOCTYPE html>
<html lang="es" class="gameplay">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>üó£Ô∏è Tu Primera Entrevista de Trabajo - K√§mpe Games</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://techkampe.github.io/daily-streak/assets/css/daily_tasks.css">
<style>
.chat-container{display:flex;flex-direction:column;height:100%;overflow:hidden}
.chat-history{flex:1;overflow-y:auto;padding:8px 16px;display:flex;flex-direction:column;gap:8px;-webkit-overflow-scrolling:touch}
.chat-bubble{max-width:85%;padding:10px 14px;border-radius:16px;font-size:14px;line-height:1.4;animation:fadeIn 0.3s ease}
.chat-bubble.npc{background:var(--surface);align-self:flex-start;border-bottom-left-radius:4px}
.chat-bubble.player{background:var(--accent);color:#000;align-self:flex-end;border-bottom-right-radius:4px}
.chat-sender{font-size:11px;font-weight:700;margin-bottom:4px;opacity:0.7}
.chat-avatar{width:32px;height:32px;border-radius:50%;object-fit:cover;margin-right:8px}
.chat-row{display:flex;align-items:flex-end;gap:8px}
.chat-row.player{flex-direction:row-reverse}
.options-panel{padding:12px 16px;background:var(--bg);border-top:1px solid var(--surface);display:flex;flex-direction:column;gap:8px}
.reaction{font-size:12px;padding:6px 10px;background:var(--surface);border-radius:8px;margin-top:4px;opacity:0.9}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div class="scene gameplay" id="scene">
<div class="hud">
<div class="hud-titles">
<div class="brand">üó£Ô∏è Tu Primera Entrevista</div>
<div class="subtitle" id="subtitle">Prep√°rate para impresionar</div>
</div>
<div class="progress-row">
<div class="bar-wrap"><div class="bar"><i id="progress" style="width:0%"></i></div></div>
<span class="badge" id="counter">Intro</span>
</div>
</div>
<div class="chat-container">
<div class="chat-history" id="chatHistory"></div>
<div class="options-panel" id="optionsPanel"></div>
</div>
</div>
<img class="avatar" src="https://techkampe.github.io/daily-streak/assets/Avatar%203_low.png" alt="" loading="lazy">
<script>
const avatars={
mentor:"https://techkampe.github.io/daily-streak/assets/Avatar%201_low.png",
recruiter:"https://techkampe.github.io/daily-streak/assets/Avatar%203_low.png"
};
const turns=[
{
messages:[
{sender:"Elena (Reclutadora)",avatar:"recruiter",text:"¬°Hola! Bienvenido a ElectroInstala. Soy Elena, del departamento de RRHH. ¬øC√≥mo te encuentras hoy?"}
],
options:[
{text:"Buenos d√≠as, Elena. Bien, gracias. Encantado de conocerla.",score:2,reaction:"üòä Muy bien, educado y profesional."},
{text:"Hola, un poco nervioso pero con ganas de empezar.",score:1,reaction:"üôÇ Honesto, aunque podr√≠as mostrar m√°s seguridad."},
{text:"Buenas. Pues aqu√≠ ando, a ver qu√© tal.",score:0,reaction:"üòê Demasiado informal para una entrevista."}
]
},
{
messages:[
{sender:"Elena (Reclutadora)",avatar:"recruiter",text:"Cu√©ntame, ¬øqu√© te motiv√≥ a formarte como electricista?"}
],
options:[
{text:"Me apasiona entender c√≥mo funciona la electricidad y resolver problemas t√©cnicos.",score:2,reaction:"üòä Excelente, muestras pasi√≥n genuina."},
{text:"Vi que hay mucho trabajo en este sector.",score:1,reaction:"ü§î Pr√°ctico, pero falta mostrar inter√©s real."},
{text:"La verdad, no sab√≠a qu√© estudiar y esto parec√≠a f√°cil.",score:0,reaction:"üò¨ Eso no transmite compromiso..."}
]
},
{
messages:[
{sender:"Elena (Reclutadora)",avatar:"recruiter",text:"Veo que no tienes experiencia laboral previa. ¬øC√≥mo crees que podr√≠as aportar al equipo?"}
],
options:[
{text:"Aprendo r√°pido, soy responsable y tengo muchas ganas de demostrar mi val√≠a.",score:2,reaction:"üòä Perfecto, actitud positiva y proactiva."},
{text:"Estoy dispuesto a hacer lo que haga falta para aprender.",score:1,reaction:"üôÇ Bien, aunque podr√≠as destacar m√°s tus cualidades."},
{text:"Pues no s√©, supongo que ya ir√© aprendiendo sobre la marcha.",score:0,reaction:"üòï Eso suena poco comprometido."}
]
},
{
messages:[
{sender:"Carlos (Mentor)",avatar:"mentor",text:"üí¨ Recuerda: la disponibilidad horaria es clave en este sector."},
{sender:"Elena (Reclutadora)",avatar:"recruiter",text:"Necesitamos gente flexible con los horarios. ¬øTendr√≠as disponibilidad para urgencias?"}
],
options:[
{text:"S√≠, entiendo que en este trabajo pueden surgir imprevistos. Cuenten conmigo.",score:2,reaction:"üòä Genial, eso es lo que buscamos."},
{text:"Depende del d√≠a, pero intentar√≠a adaptarme.",score:1,reaction:"ü§î Aceptable, aunque con reservas."},
{text:"Preferir√≠a un horario fijo, la verdad.",score:0,reaction:"üòê En este sector eso limita mucho."}
]
},
{
messages:[
{sender:"Elena (Reclutadora)",avatar:"recruiter",text:"Bien, vamos terminando. ¬øTienes alguna pregunta sobre el puesto o la empresa?"}
],
options:[
{text:"S√≠, ¬øc√≥mo es el proceso de formaci√≥n para nuevos empleados?",score:2,reaction:"üòä Muy buena pregunta, demuestra inter√©s."},
{text:"¬øCu√°nto se cobra?",score:1,reaction:"ü§î V√°lido, pero quiz√°s no sea lo primero."},
{text:"No, creo que est√° todo claro.",score:0,reaction:"üòê Siempre es mejor mostrar curiosidad."}
]
}
];
let currentTurn=0,answers=[],chatHistory=[];
const historyEl=document.getElementById('chatHistory'),optionsEl=document.getElementById('optionsPanel'),progressEl=document.getElementById('progress'),counterEl=document.getElementById('counter'),subtitleEl=document.getElementById('subtitle');

function addMessage(sender,avatar,text,isPlayer=false){
const row=document.createElement('div');
row.className='chat-row'+(isPlayer?' player':'');
if(!isPlayer){
const img=document.createElement('img');
img.className='chat-avatar';
img.src=avatars[avatar]||avatars.recruiter;
img.alt=sender;
row.appendChild(img);
}
const bubble=document.createElement('div');
bubble.className='chat-bubble '+(isPlayer?'player':'npc');
if(!isPlayer){
const senderEl=document.createElement('div');
senderEl.className='chat-sender';
senderEl.textContent=sender;
bubble.appendChild(senderEl);
}
const textEl=document.createElement('span');
textEl.textContent=text;
bubble.appendChild(textEl);
row.appendChild(bubble);
historyEl.appendChild(row);
historyEl.scrollTop=historyEl.scrollHeight;
chatHistory.push({sender,text,isPlayer});
}

function addReaction(text){
const reaction=document.createElement('div');
reaction.className='reaction';
reaction.textContent=text;
historyEl.appendChild(reaction);
historyEl.scrollTop=historyEl.scrollHeight;
}

function renderTurn(){
if(currentTurn>=turns.length){showResults();return}
const turn=turns[currentTurn];
progressEl.style.width=((currentTurn+1)/turns.length*100)+'%';
counterEl.textContent=(currentTurn+1)+'/'+turns.length;
subtitleEl.textContent='Turno '+(currentTurn+1)+' de '+turns.length;
turn.messages.forEach(m=>addMessage(m.sender,m.avatar,m.text));
optionsEl.innerHTML='';
turn.options.forEach((opt,i)=>{
const btn=document.createElement('button');
btn.className='btn-option';
btn.textContent=opt.text;
btn.onclick=()=>selectOption(i);
optionsEl.appendChild(btn);
});
ensureFits();
}

function selectOption(i){
const turn=turns[currentTurn];
const opt=turn.options[i];
addMessage('T√∫','player',opt.text,true);
setTimeout(()=>{
addReaction(opt.reaction);
answers.push({question:turn.messages[turn.messages.length-1].text,answer:opt.text,score:opt.score,reaction:opt.reaction,maxScore:2});
currentTurn++;
setTimeout(()=>renderTurn(),600);
},400);
optionsEl.innerHTML='<div class="helper">Procesando...</div>';
}

function showResults(){
setTimeout(()=>{
document.documentElement.classList.replace('gameplay','results');
document.getElementById('scene').classList.replace('gameplay','results');
const totalScore=answers.reduce((a,b)=>a+b.score,0);
const maxScore=answers.length*2;
const pct=Math.round(totalScore/maxScore*100);
let rating='Necesitas practicar m√°s';
if(pct>=80)rating='¬°Excelente entrevista!';
else if(pct>=60)rating='Buen desempe√±o';
else if(pct>=40)rating='Puedes mejorar';
document.getElementById('scene').innerHTML=`
<div class="results-scroll">
<div class="results-header">
<div class="results-title">${rating}</div>
<div class="results-score">${totalScore}/${maxScore}</div>
<div class="results-subtitle">Puntos obtenidos</div>
</div>
<div class="results-list">
${answers.map((a,i)=>`
<div class="result-item ${a.score===2?'correct':a.score===1?'':'incorrect'}">
<div class="result-question">Turno ${i+1}: ${a.question.substring(0,50)}...</div>
<div class="result-answer">${a.score===2?'‚úì Respuesta √≥ptima':a.score===1?'‚óê Aceptable':'‚úó Mejorable'}</div>
<div class="result-explanation">${a.reaction.substring(2)}</div>
</div>
`).join('')}
<div class="result-item">
<div class="result-question">üí° Consejo pr√°ctico</div>
<div class="result-explanation">Mant√©n contacto visual, si√©ntate erguido y sonr√≠e con naturalidad. La actitud positiva y el inter√©s genuino son tan importantes como tus conocimientos t√©cnicos.</div>
</div>
</div>
<div class="footer">
<button class="cta" onclick="completeTask()">Ver mi recompensa</button>
</div>
</div>`;
},500);
}

function completeTask(){
if(window.ReactNativeWebView){
window.ReactNativeWebView.postMessage(JSON.stringify({action:'TASK_COMPLETED'}));
}
}

function ensureFits(){
const scene=document.getElementById('scene');
scene.classList.remove('compact','compact-xs');
document.documentElement.style.setProperty('--ui-scale',1);
if(scene.scrollHeight>scene.clientHeight)scene.classList.add('compact');
if(scene.scrollHeight>scene.clientHeight)scene.classList.add('compact-xs');
if(scene.scrollHeight>scene.clientHeight){
document.documentElement.style.setProperty('--ui-scale',Math.max(0.88,scene.clientHeight/scene.scrollHeight));
}
}

function showIntro(){
optionsEl.innerHTML=`
<div class="helper">Escenario: Tu primera entrevista en ElectroInstala</div>
<button class="cta" onclick="startGame()">Comenzar entrevista</button>`;
addMessage("Carlos (Mentor)","mentor","¬°√Ånimo! Recuerda: s√© t√∫ mismo, muestra inter√©s y mant√©n la calma. ¬°T√∫ puedes!");
}

function startGame(){
renderTurn();
}

window.addEventListener('load',()=>{ensureFits();showIntro()});
window.addEventListener('resize',ensureFits);
window.addEventListener('orientationchange',()=>setTimeout(ensureFits,100));
</script>
</body>
</html>
